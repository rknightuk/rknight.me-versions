
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />

		<meta name="viewport" content="width=device-width" />
		<meta name="Description" content="Building an ActivityPub Server">

		<meta name="generator" content="Eleventy v2.0.0">

		<title>Building an ActivityPub Server</title>

        <link rel="stylesheet" href="/assets/css/app.css?1701703990505" type="text/css" media="screen" title="no title" charset="utf-8">
		<link rel="stylesheet" href="/assets/highlight.css" type="text/css" media="screen" title="no title" charset="utf-8">
		

        <link rel="alternate" type="application/rss+xml" title="Robb Knight RSS Feed" href="https://rknight.me/feed.xml" />
        <link rel="alternate" type="application/json" title="Robb Knight JSON Feed" href="https://rknight.me/feed.json" />

        <link rel="icon" type="image/x-icon" href="/assets/icons/favicon.ico">
        <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
        <link rel="manifest" href="/assets/icons/site.webmanifest">

        <script src="https://cdn.usefathom.com/script.js" data-site="ISEJUYJY" defer></script>

        <script src="/assets/lite-yt.js"></script>

		<meta property="og:title" content="Building an ActivityPub Server" />
        <meta property="description" content="I built Bugle, an ActivityPub server with Laravel and PHP. These are my notes on how it all works to the best of my understanding" />
		<meta property="og:description" content="I built Bugle, an ActivityPub server with Laravel and PHP. These are my notes on how it all works to the best of my understanding" />
		<meta property="og:type" content="article" />
		<meta property="og:url" content="https://rknight.me/building-an-activitypub-server/" />
        <meta property="og:image" content="https://rknight.me/assets/img/preview.png">

        <link rel="preconnect" href="https://fonts.bunny.net">
		<link href="https://fonts.bunny.net/css?family=atkinson-hyperlegible:400,400i,700,700i|source-code-pro:400" rel="stylesheet" />

        <link rel="webmention" href="https://webmention.io/rknight.me/webmention" />
        <link rel="pingback" href="https://webmention.io/rknight.me/xmlrpc" />

        <link rel="canonical" href="https://rknight.me/building-an-activitypub-server/" />
	</head>
	<body>

        <div style="margin-left:-10px;margin-right:-10px;font-weight: bold;font-size:1.5em;padding:10px;background: black;color:white;display:flex;align-items:center;justify-content:center;text-align:center;">
            <p style="margin-bottom: 0;">This is an archived version of the site. Visit <a style="color:white" href="https://rknight.me">rknight.me</a> for the current version.</p>
        </div>

		<a style="display: none;" rel="me" href="https://social.lol/@robb">Mastodon</a>
        <a style="display: none;" href="https://github.com/rknightuk" rel="me">github.com/rknightuk</a>
        <a style="display: none;" href="https://proven.lol/aaecd5">proven.lol/aaecd5</a>

        <div style="max-width: 800px;margin: 0 auto;">

		<header>
			<div class="main-header"><a href="/">Robb Knight</a></div>
            <div class="social-links">
                <a href="https://social.lol/@robb" class="social-masto">
                    <svg class="icon">
                        <use xlink:href="#mastodon"></use>
                    </svg>
                </a>
                <a href="https://github.com/rknightuk" class="social-gh">
                    <svg class="icon">
                        <use xlink:href="#github"></use>
                    </svg>
                </a>
                <a href="/subscribe" class="social-subscribe">
                    <svg class="icon">
                        <use xlink:href="#rss"></use>
                    </svg>
                </a>
            </div>
		</header>

		<div class="nav">
			<div class="nav__list">
				<a class="nav__list--item box" href="/blog/">Blog</a>

                <a class="nav__list--item box" href="/micro">Microblog</a>

                <a class="nav__list--item box" href="/log">Log</a>

                <a class="nav__list--item box" href="/projects/">Projects</a>

                <a class="nav__list--item box" href="/collections/">Collections</a>

                <a class="nav__list--item box" href="/now">/now</a>

                <a class="nav__list--item box" href="/uses/">/uses</a>

                <a class="nav__list--item box" href="/save">/Save</a>

                <a class="nav__list--item box" href="/search">Search</a>

                <a class="nav__list--item box" href="https://intersect.rknight.me/">Wiki</a>
			</div>
		</div>

		<div class="box main-content">
			
				<h2>Building an ActivityPub Server</h2>
			
			
<div class="post-date">2023-06-28</div>

<span class="post" data-pagefind-body>
	<p>To start with, I'm not convinced everything I've done here is exactly to the ActivityPub specification or if there will be problems interacting with Bugle on various ActivityPub servers outside the main ones (Mastodon, Calckey, etc). I'm also unclear on which parts of this are Mastodon-specific and which parts are pure ActivityPub. I will use Mastodon as the example external server throughout.</p>
<p>I won't go over setting up my database or server for this but at minimum you'll need a way to handle requests, render JSON, and a database to store posts and activities.</p>
<h3>WebFinger and Profile JSON</h3>
<p>This is the easiest part of the whole thing, two JSON files: <code>.well-known/webfinger</code> and <code>@bugle.json</code>.</p>
<p><code>.well-known/webfinger</code> is how ActivityPub finds links to your profile. Searching for <code>@bugle@bugle.lol</code> on Mastodon, for example, will send a <code>GET</code> request to <code>https://bugle.lol/.well-known/webfinger?resource=acct:bugle@bugle.lol</code> which will return the following:</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br><br>  <span class="token property">"subject"</span><span class="token operator">:</span> <span class="token string">"acct:bugle@bugle.lol"</span><span class="token punctuation">,</span><br>  <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>    <span class="token punctuation">{</span><br>      <span class="token property">"rel"</span><span class="token operator">:</span> <span class="token string">"self"</span><span class="token punctuation">,</span><br>      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"application/activity+json"</span><span class="token punctuation">,</span><br>      <span class="token property">"href"</span><span class="token operator">:</span> <span class="token string">"https://bugle.lol/@bugle"</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">]</span><br><span class="token punctuation">}</span></code></pre>
<p>The server handles checking if the requested <code>resource</code> exists and returning the correct data. The <code>links</code> part is how it knows the account lives at <code>bugle.lol/@bugle</code>. This might seems obvious but it isn't always the case that the username match the domain where the profile lives. For example, the profile for <a href="https://mastodon.macstories.net/@viticci">viticci@macstories.net</a> is actually at <code>mastodon.macstories.net/@viticci</code>, which is indicated by the webfinger.</p>
<p>Once Mastodon has the link, it will make a request to that link (in this case <code>https://bugle.lol/@bugle</code>) for the profile json file which includes general profile information like name, avatar, and bio, as well as which endpoints it should send requests to. These are usually called an inbox although the actually name and path isn't important.</p>
<p>You can see a full example on <a href="https://social.lol/@robb.json">my Mastodon profile</a> but I'll go through the main important parts here. The first part is the <code>@context</code>, which as best I can tell it an indicator of the type of object(?) we're defining, in this case an activity stream.</p>
<pre class="language-json"><code class="language-json"><br><span class="token punctuation">{</span><br>	<span class="token property">"@context"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>	    <span class="token string">"https://www.w3.org/ns/activitystreams"</span><span class="token punctuation">,</span><br>	    <span class="token string">"https://w3id.org/security/v1"</span><span class="token punctuation">,</span><br>	<span class="token punctuation">]</span><br><span class="token punctuation">}</span></code></pre>
<p>The next part is an ID to identify your user, a type to define that this is a <code>Person</code>, and endpoints for various features, some of which are Mastodon-specific (like <code>featured</code> and <code>featuredTags</code>).</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>	<span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"https://bugle.lol/@bugle"</span><span class="token punctuation">,</span><br>	<span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Person"</span><span class="token punctuation">,</span><br>	<span class="token property">"following"</span><span class="token operator">:</span> <span class="token string">"https://bugle.lol/@bugle/following"</span><span class="token punctuation">,</span><br>	<span class="token property">"followers"</span><span class="token operator">:</span> <span class="token string">"https://bugle.lol/@bugle/followers"</span><span class="token punctuation">,</span><br>	<span class="token property">"inbox"</span><span class="token operator">:</span> <span class="token string">"https://bugle.lol/@bugle/inbox"</span><span class="token punctuation">,</span><br>	<span class="token property">"outbox"</span><span class="token operator">:</span> <span class="token string">"https://bugle.lol/@bugle/outbox"</span><span class="token punctuation">,</span><br>	<span class="token property">"featured"</span><span class="token operator">:</span> <span class="token string">"https://bugle.lol/@bugle/collections/featured"</span><span class="token punctuation">,</span><br>	<span class="token property">"featuredTags"</span><span class="token operator">:</span> <span class="token string">"https://bugle.lol/@bugle/collections/tags"</span><span class="token punctuation">,</span><br>	<span class="token property">"endpoints"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>	    <span class="token property">"sharedInbox"</span><span class="token operator">:</span> <span class="token string">"https://bugle.lol/inbox"</span><br>	<span class="token punctuation">}</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span></code></pre>
<p>I'm not entirely sure when most of these are used aside from when first searching for a profile (because I see the requests in the logs) but the important ones here are <code>inbox</code> and <code>endpoints.sharedInbox</code>. This is where replies and mentions will get posted to (<code>sharedInbox</code>) and activities such as likes, follows, and boosts (<code>inbox</code>). I'll go into how that works further down.</p>
<p>We also need information about the profile itself like name, bio, profile picture, and so on. The <code>icon</code> attributes refer to your main profile image and <code>image</code> refers to a header image.</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>	<span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"bugle dot lol"</span><span class="token punctuation">,</span><br>	<span class="token property">"summary"</span><span class="token operator">:</span> <span class="token string">"&lt;p>A bio goes here&lt;/p>\n"</span><span class="token punctuation">,</span><br>	<span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://bugle.lol/@bugle"</span><span class="token punctuation">,</span><br>	<span class="token property">"manuallyApprovesFollowers"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>	<span class="token property">"discoverable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>	<span class="token property">"published"</span><span class="token operator">:</span> <span class="token string">"2022-12-16T00:00:00Z"</span><span class="token punctuation">,</span><br>	<span class="token property">"icon"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>		<span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Image"</span><span class="token punctuation">,</span><br>		<span class="token property">"mediaType"</span><span class="token operator">:</span> <span class="token string">"image/jpeg"</span><span class="token punctuation">,</span><br>		<span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"http://placekitten.com/200/300"</span><br>	<span class="token punctuation">}</span><span class="token punctuation">,</span><br>	<span class="token property">"image"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>		<span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Image"</span><span class="token punctuation">,</span><br>		<span class="token property">"mediaType"</span><span class="token operator">:</span> <span class="token string">"image/jpeg"</span><span class="token punctuation">,</span><br>		<span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"http://placekitten.com/600/300"</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>Finally we need a <code>publicKey</code> attribute. This is used to validate requests to and from the server:</p>
<pre class="language-json"><code class="language-json"><span class="token property">"publicKey"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>		<span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"https://bugle.lol/@bugle#main-key"</span><span class="token punctuation">,</span><br>		<span class="token property">"owner"</span><span class="token operator">:</span> <span class="token string">"https://bugle.lol/@bugle"</span><span class="token punctuation">,</span><br>		<span class="token property">"publicKeyPem"</span><span class="token operator">:</span> <span class="token string">"-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAyB9YyNt5OB23VW3sFm5o\nPnV4phqSXgqwyqmjXIE6ZtwLE0I6JEeeqv+SD2pd9QDXiUfugEWuUyNImZCglNg2\nV3Vh/NNr/YX6tWW6VSkudJ/b8lNQF8Rr/Z9wK9jD0WUmFs+YjS0R/KePDtLt1HOX\nVfjPLyOCODO+ykXQkydLI1RZf3V+iJdiTP9e5nhBxQGHkbyVja/86uqJIC96zyX4\nQPteEtHjXngVgO6QozCQu6Null4WFOHUdPGHaN7wsJtkZV10BPp3yCOiirJQlXSp\no+7YfJuROFv8QU+jWitTPTYWQYEuRwUfDUsdThqSh/u6eZt2hHjTzcI0/qgpxWqI\n1wIDAQAB\n-----END PUBLIC KEY-----\n"</span><br>	<span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre>
<p>You can generate these in most languages. Here's how I did it in PHP on profile creation to store in the database:</p>
<pre class="language-php"><code class="language-php"><span class="token variable">$config</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>	<span class="token string double-quoted-string">"private_key_bits"</span> <span class="token operator">=></span> <span class="token number">2048</span><span class="token punctuation">,</span><br>	<span class="token string double-quoted-string">"private_key_type"</span> <span class="token operator">=></span> <span class="token constant">OPENSSL_KEYTYPE_RSA</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token variable">$keypair</span> <span class="token operator">=</span> <span class="token function">openssl_pkey_new</span><span class="token punctuation">(</span><span class="token variable">$config</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token function">openssl_pkey_export</span><span class="token punctuation">(</span><span class="token variable">$keypair</span><span class="token punctuation">,</span> <span class="token variable">$private_key</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token variable">$public_key</span> <span class="token operator">=</span> <span class="token function">openssl_pkey_get_details</span><span class="token punctuation">(</span><span class="token variable">$keypair</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$public_key</span> <span class="token operator">=</span> <span class="token variable">$public_key</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"key"</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre>
<h3>Receiving Activities</h3>
<p>As mentioned above there are two endpoints for receiving activities: The global inbox (<code>/inbox</code>) and the user inbox (<code>/@bugle/inbox</code>).</p>
<h3>Validating Requests</h3>
<p>All signature validation is handled in my <a href="https://github.com/rknightuk/bugle/blob/main/app/Services/HttpSignature.php"><code>HttpSignature</code> class</a> if you'd prefer to look at the code directly.</p>
<p>Every request that comes in should be validated against the signature to make sure it's a valid request. The first step is to extract the values into an array keyed by the name (other languages and frameworks might have an easier way to do this).</p>
<pre class="language-php"><code class="language-php"><span class="token variable">$values</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token comment">// split the signature at ',' and assign each one</span><br><span class="token comment">// to $values, keyed by its name</span><br><span class="token variable">$parts</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string single-quoted-string">','</span><span class="token punctuation">,</span> <span class="token variable">$request</span><span class="token operator">-></span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'signature'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$parts</span> <span class="token keyword">as</span> <span class="token variable">$current</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	<span class="token variable">$pair</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'='</span><span class="token punctuation">,</span> <span class="token variable">$current</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token variable">$key</span> <span class="token operator">=</span> <span class="token variable">$pair</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>	<span class="token variable">$value</span> <span class="token operator">=</span> <span class="token function">substr</span><span class="token punctuation">(</span><span class="token variable">$pair</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token variable">$values</span><span class="token punctuation">[</span><span class="token variable">$key</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$value</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// $values is now:</span><br><span class="token comment">// [</span><br><span class="token comment">//    'keyId' => 'https://mas.to/users/rknightuk#main-key',</span><br><span class="token comment">//    'algorithm' => 'rsa-sha256',</span><br><span class="token comment">//    'headers' => ''(request-target) host date digest content-type',</span><br><span class="token comment">//    'signature' => 'BIGLONGSIGNATURE',</span><br><span class="token comment">// ];</span></code></pre>
<p>Next we need to get the <code>headers</code> value from the signature, and map over those, get the values from the request headers, and generate a string. This string is what we use to validate the request:</p>
<pre class="language-php"><code class="language-php"><span class="token variable">$inboxPath</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'/@bugle/inbox'</span><span class="token punctuation">;</span><br><br><span class="token variable">$headerList</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string single-quoted-string">' '</span><span class="token punctuation">,</span> <span class="token variable">$values</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'headers'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// $headersList = [</span><br><span class="token comment">//	'(request-target)',</span><br><span class="token comment">//	'host',</span><br><span class="token comment">//	'date',</span><br><span class="token comment">//	'digest',</span><br><span class="token comment">//	'content-type',</span><br><span class="token comment">// ]</span><br><br><span class="token variable">$expectedHeaders</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>  <br><span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$headerList</span> <span class="token keyword">as</span> <span class="token variable">$h</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$h</span> <span class="token operator">===</span> <span class="token string double-quoted-string">"(request-target)"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		<span class="token variable">$expectedHeaders</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"(request-target): post "</span> <span class="token operator">.</span> <span class="token variable">$inboxPath</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>		<span class="token variable">$expectedHeaders</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$h</span> <span class="token operator">.</span> <span class="token string double-quoted-string">": "</span> <span class="token operator">.</span> <span class="token variable">$request</span><span class="token operator">-></span><span class="token property">headers</span><span class="token operator">-></span><span class="token function">get</span><span class="token punctuation">(</span><span class="token variable">$h</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token variable">$signatureHeader</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-></span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'signature'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$signaturePairs</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string single-quoted-string">','</span><span class="token punctuation">,</span> <span class="token variable">$signatureHeader</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$signatureHeaderMap</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$signaturePairs</span> <span class="token keyword">as</span> <span class="token variable">$pair</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	<span class="token variable">$pairParts</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'='</span><span class="token punctuation">,</span> <span class="token variable">$pair</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token variable">$key</span> <span class="token operator">=</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$pairParts</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token variable">$value</span> <span class="token operator">=</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$pairParts</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'"'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token variable">$signatureHeaderMap</span><span class="token punctuation">[</span><span class="token variable">$key</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$value</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token variable">$str</span> <span class="token operator">=</span> <span class="token function">implode</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"\n"</span><span class="token punctuation">,</span> <span class="token variable">$expectedHeaders</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// $str:</span><br><span class="token comment">// "(request-target): post /@bugle/inbox</span><br><span class="token comment">// host: 9928-82-19-65-174.ngrok-free.app</span><br><span class="token comment">// date: Tue, 27 Jun 2023 15:27:11 GMT</span><br><span class="token comment">// digest: SHA-256=LdxwDtVsenhzJE0E3H2oj2C7cKPvZYEG5LrY0phH9Zc=</span><br><span class="token comment">// content-type: application/activity+json"</span></code></pre>
<p>One thing to note here is if you set different inbox URLs for user and for local, then you need to specific which path you're validating for (either <code>/inbox</code> or <code>/@bugle/inbox</code>) otherwise the signatures won't match.</p>
<p>Lastly, we need to fetch the public key for the actor, and use that to validate the request:</p>
<pre class="language-php"><code class="language-php"><span class="token variable">$keyId</span> <span class="token operator">=</span> <span class="token variable">$signatureHeaderMap</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'keyId'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token variable">$actor</span> <span class="token operator">=</span> <span class="token class-name static-context">Http</span><span class="token operator">::</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'application/activity+json'</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">get</span><span class="token punctuation">(</span><span class="token variable">$keyId</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$publicKeyPem</span> <span class="token operator">=</span> <span class="token variable">$actor</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'publicKey'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'publicKeyPem'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><span class="token variable">$verifier</span> <span class="token operator">=</span> <span class="token function">openssl_get_publickey</span><span class="token punctuation">(</span><span class="token variable">$publicKeyPem</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$validate</span> <span class="token operator">=</span> <span class="token function">openssl_verify</span><span class="token punctuation">(</span><span class="token variable">$str</span><span class="token punctuation">,</span> <span class="token function">base64_decode</span><span class="token punctuation">(</span><span class="token variable">$signatureHeaderMap</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'signature'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$verifier</span><span class="token punctuation">,</span> <span class="token constant">OPENSSL_ALGO_SHA256</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token variable">$isValid</span> <span class="token operator">=</span> <span class="token variable">$validate</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">;</span></code></pre>
<p>If <code>isValid</code> is true, we can carry on and accept requests. You should do this for all requests that come into the inboxes.</p>
<h3>Likes, Boosts, and Follows</h3>
<p>The user inbox will <code>POST</code> requests for follows, likes, and boosts. Likes and boosts are easy enough to handle as you don't need to respond to the request or even store them if you don't want to. A like is the simplest of the two. It contains an ID of the like, the type of activity, the actor, and the object - this is the post that has been liked.</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>	<span class="token property">"@context"</span><span class="token operator">:</span> <span class="token string">"https://www.w3.org/ns/activitystreams"</span><span class="token punctuation">,</span><br>	<span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"https://aninstance.social/users/robb#likes/10253875"</span><span class="token punctuation">,</span><br>	<span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Like"</span><span class="token punctuation">,</span><br>	<span class="token property">"actor"</span><span class="token operator">:</span> <span class="token string">"https://aninstance.social/users/robb"</span><span class="token punctuation">,</span><br>	<span class="token property">"object"</span><span class="token operator">:</span> <span class="token string">"https://bugle.lol/@bugle/f6dfebf6-1a73-4b3e-8afa-28a768698579"</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span></code></pre>
<p>Boosts are similar, but they also include <code>to</code> and <code>cc</code> arrays of users the post is being boosted to, as well as a <code>published_at</code> date.</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>	<span class="token property">"@context"</span><span class="token operator">:</span> <span class="token string">"https://www.w3.org/ns/activitystreams"</span><span class="token punctuation">,</span><br>	<span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"https://aninstance.social/users/robb/statuses/110592144954280515/activity"</span><span class="token punctuation">,</span><br>	<span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Announce"</span><span class="token punctuation">,</span><br>	<span class="token property">"actor"</span><span class="token operator">:</span> <span class="token string">"https://aninstance.social/users/robb"</span><span class="token punctuation">,</span><br>	<span class="token property">"published"</span><span class="token operator">:</span> <span class="token string">"2023-06-23T06:36:51Z"</span><span class="token punctuation">,</span><br>	<span class="token property">"to"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>		<span class="token string">"https://www.w3.org/ns/activitystreams#Public"</span><br>	<span class="token punctuation">]</span><span class="token punctuation">,</span><br>	<span class="token property">"cc"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>		<span class="token string">"https://8d19-82-19-65-174.ngrok-free.app/@bugle"</span><span class="token punctuation">,</span><br>		<span class="token string">"https://aninstance.social/users/robb/followers"</span><span class="token punctuation">,</span><br>	<span class="token punctuation">]</span><span class="token punctuation">,</span><br>	<span class="token property">"object"</span><span class="token operator">:</span> <span class="token string">"https://8d19-82-19-65-174.ngrok-free.app/@bugle/f6dfebf6-1a73-4b3e-8afa-28a768698579"</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span></code></pre>
<p>Follow events are more complicated because they require a response. A follow activity will look something like this:</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>	<span class="token property">"@context"</span><span class="token operator">:</span> <span class="token string">"https://www.w3.org/ns/activitystreams"</span><span class="token punctuation">,</span><br>	<span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"https://aninstance.social/9bb08aae-c666-432f-a3e6-35617e32830d"</span><span class="token punctuation">,</span><br>	<span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Follow"</span><span class="token punctuation">,</span><br>	<span class="token property">"actor"</span><span class="token operator">:</span> <span class="token string">"https://aninstance.social/users/robb"</span><span class="token punctuation">,</span><br>	<span class="token property">"object"</span><span class="token operator">:</span> <span class="token string">"https://bugle.lol/@bugle"</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span></code></pre>
<p>To respond to a follow, we need to send an <code>Accept</code> activity with a valid signature. To start with we need to build our activity message; it has an ID, type, actor (the user being followed) and an <code>object</code> which in this case, is the <code>Follow</code> activity we received.</p>
<pre class="language-php"><code class="language-php"><span class="token comment">// this isn't important unless you intend to store all</span><br><span class="token comment">// follow requests that come into the system but a unique(ish)</span><br><span class="token comment">// ID is required here</span><br><span class="token variable">$guid</span> <span class="token operator">=</span> <span class="token function">bin2hex</span><span class="token punctuation">(</span><span class="token function">random_bytes</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token variable">$message</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>	<span class="token string single-quoted-string">'@context'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'https://www.w3.org/ns/activitystreams'</span><span class="token punctuation">,</span><br>	<span class="token string single-quoted-string">'id'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'https://bugle.lol'</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'/'</span> <span class="token operator">.</span> <span class="token variable">$guid</span><span class="token punctuation">,</span><br>	<span class="token string single-quoted-string">'type'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'Accept'</span><span class="token punctuation">,</span><br>	<span class="token string single-quoted-string">'actor'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'https://bugle.lol/@bugle'</span><span class="token punctuation">,</span><br>	<span class="token string single-quoted-string">'object'</span> <span class="token operator">=></span> <span class="token punctuation">[</span><br>		<span class="token string single-quoted-string">'@context'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'https://www.w3.org/ns/activitystreams'</span><span class="token punctuation">,</span><br>		<span class="token string single-quoted-string">'id'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'https://aninstance.social/9bb08aae-c666-432f-a3e6-35617e32830d'</span><span class="token punctuation">,</span><br>		<span class="token string single-quoted-string">'type'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'Follow'</span><span class="token punctuation">,</span><br>		<span class="token string single-quoted-string">'actor'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'https://aninstance.social/users/robb'</span><span class="token punctuation">,</span><br>		<span class="token string single-quoted-string">'object'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'https://bugle.lol/@bugle'</span><span class="token punctuation">,</span><br>	<span class="token punctuation">]</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre>
<p>To generate the signature we need the message we just created, the private key of the profile from the database, the host of the actor (in this case <code>aninstance.social</code>), the inbox path (<code>/@bugle/inbox</code>), and the url to the profile.</p>
<pre class="language-php"><code class="language-php"><span class="token variable">$host</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'aninstance.social'</span><span class="token punctuation">;</span><br><span class="token variable">$path</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'/@bugle/inbox'</span><span class="token punctuation">;</span><br><span class="token variable">$privateKey</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'a_private_key'</span><span class="token punctuation">;</span><br><span class="token variable">$keyId</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'https://bugle.lol/@bugle'</span><span class="token punctuation">;</span><br><br><span class="token variable">$hash</span> <span class="token operator">=</span> <span class="token function">hash</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'sha256'</span><span class="token punctuation">,</span> <span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$digest</span> <span class="token operator">=</span> <span class="token function">base64_encode</span><span class="token punctuation">(</span><span class="token variable">$hash</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token variable">$date</span> <span class="token operator">=</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'D, d M Y H:i:s \G\M\T'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$signer</span> <span class="token operator">=</span> <span class="token function">openssl_get_privatekey</span><span class="token punctuation">(</span><span class="token variable">$privateKey</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$stringToSign</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"(request-target): post <span class="token interpolation"><span class="token variable">$path</span></span>\nhost: <span class="token interpolation"><span class="token variable">$host</span></span>\ndate: <span class="token interpolation"><span class="token variable">$date</span></span>\ndigest: SHA-256=<span class="token interpolation"><span class="token variable">$digest</span></span>"</span><span class="token punctuation">;</span><br><span class="token function">openssl_sign</span><span class="token punctuation">(</span><span class="token variable">$stringToSign</span><span class="token punctuation">,</span> <span class="token variable">$signature</span><span class="token punctuation">,</span> <span class="token variable">$signer</span><span class="token punctuation">,</span> <span class="token constant">OPENSSL_ALGO_SHA256</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$signature_b64</span> <span class="token operator">=</span> <span class="token function">base64_encode</span><span class="token punctuation">(</span><span class="token variable">$signature</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token variable">$header</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'keyId="'</span> <span class="token operator">.</span> <span class="token variable">$keyId</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'",algorithm="rsa-sha256",headers="(request-target) host date digest",signature="'</span> <span class="token operator">.</span> <span class="token variable">$signature_b64</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'"'</span><span class="token punctuation">;</span><br><br><span class="token variable">$headers</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>    <span class="token string single-quoted-string">'Host'</span> <span class="token operator">=></span> <span class="token variable">$host</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'Date'</span> <span class="token operator">=></span> <span class="token variable">$date</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'Signature'</span> <span class="token operator">=></span> <span class="token variable">$header</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'Digest'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'SHA-256='</span> <span class="token operator">.</span> <span class="token variable">$digest</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'Content-Type'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'application/activity+json'</span><span class="token punctuation">,</span><br>    <span class="token string single-quoted-string">'Accept'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'application/activity+json'</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre>
<p>Finally, we send the <code>Accept</code> activity:</p>
<pre class="language-php"><code class="language-php"><span class="token variable">$inbox</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'https://aninstance.social/users/robb/inbox'</span><span class="token punctuation">;</span><br><br><span class="token keyword">return</span> <span class="token class-name static-context">Http</span><span class="token operator">::</span><span class="token function">withHeaders</span><span class="token punctuation">(</span><span class="token variable">$headers</span><span class="token punctuation">)</span><br>	<span class="token operator">-></span><span class="token function">withBody</span><span class="token punctuation">(</span><span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'application/json'</span><span class="token punctuation">)</span><br>	<span class="token operator">-></span><span class="token function">post</span><span class="token punctuation">(</span><span class="token variable">$inbox</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>We'll need this same header signature generation later for notifying followers of new posts.</p>
<p>If someone unfollows you, you'll receive an <code>Undo</code> request. Check the <code>actor</code> on that request and you can then remove them from your followers table.</p>
<h3>Replies</h3>
<p>The global inbox will receive a <code>POST</code> request with data about replies and @mentions with data that looks something like this:</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>	<span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"https://mas.to/users/rknightuk/statuses/110617068531392295/activity"</span><span class="token punctuation">,</span><br>	<span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Create"</span><span class="token punctuation">,</span><br>	<span class="token property">"actor"</span><span class="token operator">:</span> <span class="token string">"https://mas.to/users/rknightuk"</span><span class="token punctuation">,</span><br>	<span class="token property">"published"</span><span class="token operator">:</span> <span class="token string">"2023-06-27T16:15:15Z"</span><span class="token punctuation">,</span><br>	<span class="token property">"to"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>	   <span class="token string">"https://www.w3.org/ns/activitystreams#Public"</span><span class="token punctuation">,</span><br>	<span class="token punctuation">]</span><span class="token punctuation">,</span><br>	<span class="token property">"cc"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>	    <span class="token string">"https://mas.to/users/rknightuk/followers"</span><span class="token punctuation">,</span><br>	    <span class="token string">"https://bugle.lol/@robb"</span><span class="token punctuation">,</span><br>	<span class="token punctuation">]</span><span class="token punctuation">,</span><br>	<span class="token property">"object"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>	    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"https://mas.to/users/rknightuk/statuses/110617068531392295"</span><span class="token punctuation">,</span><br>	    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Note"</span><span class="token punctuation">,</span><br>	    <span class="token property">"inReplyTo"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span><br>	    <span class="token property">"published"</span><span class="token operator">:</span> <span class="token string">"2023-06-27T16:15:15Z"</span><span class="token punctuation">,</span><br>	    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://mas.to/@rknightuk/110617068531392295"</span><span class="token punctuation">,</span><br>	    <span class="token property">"attributedTo"</span><span class="token operator">:</span> <span class="token string">"https://mas.to/users/rknightuk"</span><span class="token punctuation">,</span><br>	    <span class="token property">"to"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>	        <span class="token property">"0"</span><span class="token operator">:</span> <span class="token string">"https://www.w3.org/ns/activitystreams#Public"</span><span class="token punctuation">,</span><br>	    <span class="token punctuation">]</span><span class="token punctuation">,</span><br>	    <span class="token property">"cc"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>	        <span class="token string">"https://mas.to/users/rknightuk/followers"</span><span class="token punctuation">,</span><br>	        <span class="token string">"https://bugle.lol/@robb"</span><span class="token punctuation">,</span><br>	    <span class="token punctuation">]</span><span class="token punctuation">,</span><br>	    <span class="token property">"content"</span><span class="token operator">:</span> <span class="token string">"&lt;p>&lt;span class=\"h-card\">&lt;a href=\"https://bugle.lol/@robb\" class=\"u-url mention\">@&lt;span>robb&lt;/span>&lt;/a>&lt;/span> hello!&lt;/p>"</span><span class="token punctuation">,</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>If you only have one profile setup then you're golden: just save the <code>object.content</code> and the <code>object.id</code> somewhere and you have your reply. If you have a server with multiple profiles, you can map over the <code>object.cc</code> array to find matching profiles for your domain.</p>
<p>As a bonus here, unrelated to ActivityPub, I setup <a href="https://ntfy.sh/">https://ntfy.sh/</a> to send me notifications whenever I get a reply:</p>
<pre class="language-php"><code class="language-php"><span class="token variable">$ntfyKey</span> <span class="token operator">=</span> <span class="token function">config</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'bugle.ntfy_key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token class-name static-context">Http</span><span class="token operator">::</span><span class="token function">withHeaders</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br>	<span class="token string single-quoted-string">'Content-Type'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'text/plain'</span><span class="token punctuation">,</span><br>	<span class="token string single-quoted-string">'Title'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'New mention from @'</span> <span class="token operator">.</span> <span class="token variable">$activity</span><span class="token operator">-></span><span class="token function">getActorUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>	<span class="token string single-quoted-string">'click'</span> <span class="token operator">=></span> <span class="token class-name static-context">Arr</span><span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'object.url'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">)</span><br><span class="token operator">-></span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'https://ntfy.sh/'</span> <span class="token operator">.</span> <span class="token variable">$ntfyKey</span><span class="token punctuation">,</span> <span class="token function">strip_tags</span><span class="token punctuation">(</span><span class="token variable">$activity</span><span class="token operator">-></span><span class="token property">content</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3>Formatting Posts</h3>
<p>The post's content needs to be rendered to HTML. Bugle supports writing in Markdown so I use <a href="https://github.com/thephpleague/commonmark"><code>league/commonmark</code></a> to format the content for sending to followers. I also extract @mentions to generate links in the posts and add them to <code>tags</code> on the post JSON. See <a href="https://github.com/rknightuk/bugle/blob/main/app/Services/TootFormatter.php"><code>TootFormatter</code></a> for the full implementation.</p>
<p>A post that looks like this:</p>
<pre class="language-md"><code class="language-md">This toot has <span class="token url">[<span class="token content">a link</span>](<span class="token url">https://example.com</span>)</span> and a mention: @robb@social.lol ahoy!</code></pre>
<p>Is run through the formatter:</p>
<pre class="language-php"><code class="language-php"><span class="token variable">$content</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'This toot has [a link](https://example.com) and a mention: @robb@social.lol ahoy!'</span><span class="token punctuation">;</span><br><br><span class="token variable">$converter</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CommonMarkConverter</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br>	<span class="token string single-quoted-string">'html_input'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'strip'</span><span class="token punctuation">,</span><br>	<span class="token string single-quoted-string">'allow_unsafe_links'</span> <span class="token operator">=></span> <span class="token constant boolean">false</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token variable">$content</span> <span class="token operator">=</span> <span class="token variable">$converter</span><span class="token operator">-></span><span class="token function">convert</span><span class="token punctuation">(</span><span class="token variable">$content</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token variable">$content</span> <span class="token operator">=</span> <span class="token function">nl2br</span><span class="token punctuation">(</span><span class="token variable">$content</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token variable">$content</span> <span class="token operator">=</span> <span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"\n"</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">,</span> <span class="token variable">$content</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token variable">$tags</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token variable">$pattern</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'/@?\b([A-Z0-9._%+-]+)@([A-Z0-9.-]+\.[A-Z]{2,})\b/mi'</span><span class="token punctuation">;</span><br><span class="token function">preg_match_all</span><span class="token punctuation">(</span><span class="token variable">$pattern</span><span class="token punctuation">,</span> <span class="token variable">$content</span><span class="token punctuation">,</span> <span class="token variable">$matches</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">[</span><span class="token variable">$fullUsernames</span><span class="token punctuation">,</span> <span class="token variable">$usernames</span><span class="token punctuation">,</span> <span class="token variable">$domains</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$matches</span><span class="token punctuation">;</span><br><br><span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$fullUsernames</span> <span class="token keyword">as</span> <span class="token variable">$i</span> <span class="token operator">=></span> <span class="token variable">$fu</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	<span class="token variable">$tags</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><br>		<span class="token string single-quoted-string">'type'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'Mention'</span><span class="token punctuation">,</span><br>		<span class="token string single-quoted-string">'href'</span> <span class="token operator">=></span> <span class="token string single-quoted-string">'https://'</span> <span class="token operator">.</span> <span class="token variable">$domains</span><span class="token punctuation">[</span><span class="token variable">$i</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'/@'</span> <span class="token operator">.</span> <span class="token variable">$usernames</span><span class="token punctuation">[</span><span class="token variable">$i</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>		<span class="token string single-quoted-string">'name'</span> <span class="token operator">=></span> <span class="token variable">$fu</span><span class="token punctuation">,</span><br>	<span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>	<span class="token variable">$content</span> <span class="token operator">=</span> <span class="token function">str_replace</span><span class="token punctuation">(</span><br>		<span class="token variable">$fu</span><span class="token punctuation">,</span><br>		<span class="token function">sprintf</span><span class="token punctuation">(</span><br>			<span class="token string single-quoted-string">'&lt;span class="h-card">&lt;a href="https://%s/@%s" class="u-url mention">@&lt;span>%s&lt;/span>&lt;/a>&lt;/span>'</span><span class="token punctuation">,</span><br>			<span class="token variable">$domains</span><span class="token punctuation">[</span><span class="token variable">$i</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>			<span class="token variable">$usernames</span><span class="token punctuation">[</span><span class="token variable">$i</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>			<span class="token variable">$usernames</span><span class="token punctuation">[</span><span class="token variable">$i</span><span class="token punctuation">]</span><br>		<span class="token punctuation">)</span><span class="token punctuation">,</span><br>		<span class="token variable">$content</span><span class="token punctuation">,</span><br>	<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token variable">$content</span> <span class="token operator">=</span> <span class="token function">preg_replace</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/(&lt;br \/>)+$/'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">,</span> <span class="token variable">$content</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">return</span> <span class="token punctuation">[</span><br>	<span class="token variable">$content</span><span class="token punctuation">,</span> <span class="token variable">$tags</span><br><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre>
<p>Becomes:</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>This toot has <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://example.com<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>a link<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span> and a mention: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>h-card<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://social.lol/@robb<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>u-url mention<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>@<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>robb<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span> ahoy!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>",</code></pre>
<p>And the <code>tags</code>, which we'll use later to determine who to notify of a mention, look like this:</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">[</span><br>	<span class="token punctuation">{</span><br>		<span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Mention"</span><span class="token punctuation">,</span><br>		<span class="token property">"href"</span><span class="token operator">:</span> <span class="token string">"https://social.lol/@robb"</span><span class="token punctuation">,</span><br>		<span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"@robb@social.lol"</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">]</span></code></pre>
<h3>Notifying Followers about New Posts</h3>
<p>Unlike RSS where new posts can be fetched into a feed ActivityPub requires all followers are notified of new posts by the originating server. Here's an example payload to notify followers of a new post.</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>	<span class="token property">"@context"</span><span class="token operator">:</span> <span class="token string">"https://www.w3.org/ns/activitystreams"</span><span class="token punctuation">,</span><br>	<span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"https://bugle.lol/@bugle/7c01aab9-bc96-4773-b235-703a6d2a1f76"</span><span class="token punctuation">,</span><br>	<span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Create"</span><span class="token punctuation">,</span><br>	<span class="token property">"actor"</span><span class="token operator">:</span> <span class="token string">"https://bugle.lol/@bugle"</span><span class="token punctuation">,</span><br>	<span class="token property">"to"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>		<span class="token string">"https://www.w3.org/ns/activitystreams#Public"</span><br>	<span class="token punctuation">]</span><span class="token punctuation">,</span><br>	<span class="token property">"cc"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>		<span class="token string">"https://bugle.lol/@bugle/followers"</span><span class="token punctuation">,</span><br>		<span class="token string">"https://example.com/users/robb"</span><br>	<span class="token punctuation">]</span><span class="token punctuation">,</span><br>	<span class="token property">"object"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>		<span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"https://bugle.lol/@bugle/7c01aab9-bc96-4773-b235-703a6d2a1f76"</span><span class="token punctuation">,</span><br>		<span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Note"</span><span class="token punctuation">,</span><br>		<span class="token property">"inReplyTo"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span><br>		<span class="token property">"published"</span><span class="token operator">:</span> <span class="token string">"2023-06-27T20:42:43Z"</span><span class="token punctuation">,</span><br>		<span class="token property">"updated"</span><span class="token operator">:</span> <span class="token string">"2023-06-27T21:30:10Z"</span><span class="token punctuation">,</span><br>		<span class="token property">"attributedTo"</span><span class="token operator">:</span> <span class="token string">"https://bugle.lol/@bugle"</span><span class="token punctuation">,</span><br>		<span class="token property">"content"</span><span class="token operator">:</span> <span class="token string">"&lt;p>Toot toot!&lt;/p>"</span><span class="token punctuation">,</span><br>		<span class="token property">"to"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>		  <span class="token string">"https://www.w3.org/ns/activitystreams#Public"</span><br>		<span class="token punctuation">]</span><span class="token punctuation">,</span><br>		<span class="token property">"cc"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>		  <span class="token string">"https://bugle.lol/@bugle/followers"</span><span class="token punctuation">,</span><br>		  <span class="token string">"https://example.com/users/robb"</span><br>		<span class="token punctuation">]</span><span class="token punctuation">,</span><br>		<span class="token property">"senstive"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>		<span class="token property">"summary"</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span><br>		<span class="token property">"attachment"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>			<span class="token punctuation">{</span><br>				<span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Document"</span><span class="token punctuation">,</span><br>				<span class="token property">"mediaType"</span><span class="token operator">:</span> <span class="token string">"image/jpeg"</span><span class="token punctuation">,</span><br>				<span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"http://placekitten.com/200/300"</span><span class="token punctuation">,</span><br>				<span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"A kitten"</span><span class="token punctuation">,</span><br>				<span class="token property">"blurhash"</span><span class="token operator">:</span> <span class="token string">"L46[2Hofofof00j[offQ~qofofof"</span><span class="token punctuation">,</span><br>				<span class="token property">"width"</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span><br>				<span class="token property">"height"</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span><br>			<span class="token punctuation">}</span><br>		<span class="token punctuation">]</span><span class="token punctuation">,</span><br>		<span class="token property">"tag"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>			<span class="token punctuation">{</span><br>				<span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Mention"</span><span class="token punctuation">,</span><br>				<span class="token property">"href"</span><span class="token operator">:</span> <span class="token string">"https://mas.to/@rknightuk"</span><span class="token punctuation">,</span><br>				<span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"@rknightuk@mas.to"</span><br>			<span class="token punctuation">}</span><br>		<span class="token punctuation">]</span><br>	<span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>The <code>type</code> attribute has three possible values that I'm using:</p>
<ul>
<li><code>Create</code> - to notify of a new post</li>
<li><code>Delete</code> - to delete an existing post</li>
<li><code>Update</code> - to update an existing post after an edit. Mastodon (and I assume others) require the <code>updated</code> timestamp for a <code>Update</code> activity</li>
</ul>
<p>The <code>cc</code> field is how visibility is controlled on Mastodon (I think) but I haven't looked into it enough so Bugle only has the ability to send public posts.</p>
<p>To notify followers of a new post, send a <code>POST</code> request to the <em>global</em> of the followers instance. For the sake of simplicity I'm taking the users domain and appending <code>/inbox</code> to it. This won't work in a few edge-cases (like the MacStories example above) so I need to update Bugle to fetch the users endpoints using webfinger either when they follow an account, or each time I need to send to them.</p>
<p>If we assume I have one follower (@robb@example.com) and I make a post that mentioned another account (@dave@example.com) I need to make two requests to notify them both. A follower notification goes to the user inbox:</p>
<pre class="language-php"><code class="language-php"><span class="token variable">$follower</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'https://example.com/@robb'</span><span class="token punctuation">;</span><br><span class="token variable">$inbox</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'https://example.com/@robb/inbox'</span><span class="token punctuation">;</span><br><br><span class="token variable">$headers</span> <span class="token operator">=</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">;</span> <span class="token comment">// generate header signture as we did above for `Accept`  </span><br><span class="token variable">$response</span> <span class="token operator">=</span> <span class="token class-name static-context">Http</span><span class="token operator">::</span><span class="token function">withHeaders</span><span class="token punctuation">(</span><span class="token variable">$headers</span><span class="token punctuation">)</span><br>	<span class="token operator">-></span><span class="token function">withBody</span><span class="token punctuation">(</span><span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'application/json'</span><span class="token punctuation">)</span><br>	<span class="token operator">-></span><span class="token function">post</span><span class="token punctuation">(</span><span class="token variable">$inbox</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br></code></pre>
<p>And an @mention goes to the global inbox. For mentions, you need to include the <code>tag</code> array in the post data (see above).</p>
<pre class="language-php"><code class="language-php"><span class="token variable">$mention</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'https://example.com/@dave'</span><span class="token punctuation">;</span><br><span class="token variable">$inbox</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'https://example.com/inbox'</span><span class="token punctuation">;</span><br><br><span class="token variable">$headers</span> <span class="token operator">=</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">;</span> <span class="token comment">// generate header signture as we did above for `Accept`  </span><br><span class="token variable">$response</span> <span class="token operator">=</span> <span class="token class-name static-context">Http</span><span class="token operator">::</span><span class="token function">withHeaders</span><span class="token punctuation">(</span><span class="token variable">$headers</span><span class="token punctuation">)</span><br>	<span class="token operator">-></span><span class="token function">withBody</span><span class="token punctuation">(</span><span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'application/json'</span><span class="token punctuation">)</span><br>	<span class="token operator">-></span><span class="token function">post</span><span class="token punctuation">(</span><span class="token variable">$inbox</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3>Replying to a post</h3>
<p>If you look at the post data above you may have noticed a null value of <code>inReplyTo</code>. This is the part that needs to be filled in to reply to a specific post. Say I was replying to <a href="https://social.lol/@robb/109863669770547458">this <em>excellent</em> post</a> by a handsome internet person I need to include the URL as the value for <code>inReplyTo</code> like so:</p>
<pre class="language-php"><code class="language-php"><span class="token string double-quoted-string">"inReplyTo"</span><span class="token punctuation">:</span> <span class="token string single-quoted-string">'https://social.lol/@robb/109863669770547458'</span><span class="token punctuation">,</span></code></pre>
<p>Any posts with that set will show up as replies to the original post.</p>
<h3>A note on attachments</h3>
<p>nb: I've only tested images because it's unlikely I'll need video any time soon.</p>
<p>Attachments are included as an array in the post JSON with their mime type, url, alt text, width/height, and something I hadn't heard of before: a <a href="https://blurha.sh/">blurhash</a>.</p>
<pre class="language-json"><code class="language-json"><br><span class="token punctuation">{</span><br>	<span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"Document"</span><span class="token punctuation">,</span><br>	<span class="token property">"mediaType"</span><span class="token operator">:</span> <span class="token string">"imag/jpeg"</span><span class="token punctuation">,</span><br>	<span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"http://placekitten.com/200/300"</span><span class="token punctuation">,</span><br>	<span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"A kitten"</span><span class="token punctuation">,</span><br>	<span class="token property">"blurhash"</span><span class="token operator">:</span> <span class="token string">"L46[2Hofofof00j[offQ~qofofof"</span><span class="token punctuation">,</span><br>	<span class="token property">"width"</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span><br>	<span class="token property">"height"</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span></code></pre>
<p>A blurhash is &quot;<em>a compact representation of a placeholder for an image.</em>&quot;. So when you see blurry images loading on Mastodon, these are blurhashes. To make one you need a library for your chosen language which in my case was PHP and I used <a href="https://github.com/bepsvpt/blurhash"><code>bepsvpt/blurhash</code></a>:</p>
<pre class="language-php"><code class="language-php"><span class="token variable">$hash</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">blurhash</span><span class="token operator">-></span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token variable">$attachment</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// L46[2Hofofof00j[offQ~qofofof</span></code></pre>
<p>And there you go. Everything I (think) I understand about ActivityPub. All of the code for Bugle is <a href="https://github.com/rknightuk/bugle">on GitHub</a> for your perusal.</p>
<h3>Links and Resources</h3>
<p>Thanks to <a href="https://lewisdale.dev">Lewis</a> for his help with verify requests. Articles and implementations I found helpful to work out how all this works:</p>
<h4>Articles</h4>
<ul>
<li><a href="https://justingarrison.com/blog/2022-12-06-mastodon-files-instance/">Mastodon instance with 6 files - Justin Garrison</a></li>
<li><a href="https://macwright.com/2022/12/09/activitypub.html">Playing with ActivityPub - macwright.com</a></li>
<li><a href="https://blog.joinmastodon.org/2018/07/how-to-make-friends-and-verify-requests/">How to make friends and verify requests - Mastodon Blog</a></li>
<li><a href="https://hacks.mozilla.org/2018/11/decentralizing-social-interactions-with-activitypub/">Decentralizing Social Interactions with ActivityPub - Mozilla Hacks - the Web developer blog</a></li>
<li><a href="https://lewisdale.dev/post/you-can-be-friends-with-my-blog/">You can be friends with my blog | LewisDale.dev</a></li>
<li><a href="https://magazine.joomla.org/all-issues/february-2023/turning-the-joomla-website-into-an-activitypub-server">Turning the Joomla website into an ActivityPub server and being an independent participant in the Fediverse - A start - The Joomla Community Magazine</a></li>
<li><a href="https://seb.jambor.dev/posts/activitypub-academy/">ActivityPub.Academy - Sebastian Jambor's blog</a></li>
<li><a href="https://seb.jambor.dev/posts/understanding-activitypub/">Understanding ActivityPub - Sebastian Jambor's blog</a></li>
<li><a href="https://tinysubversions.com/notes/reading-activitypub/">reading-activitypub</a></li>
</ul>
<h4>Implementations</h4>
<ul>
<li><a href="https://github.com/dariusk/express-activitypub">dariusk/express-activitypub: A very simple reference implementation of an ActivityPub server using Express.js</a></li>
<li><a href="https://wordpress.org/plugins/activitypub/">ActivityPub  WordPress plugin | WordPress.org</a></li>
<li><a href="https://github.com/LewisDaleUK/slap">LewisDaleUK/slap: Super Lightweight Activity Pub</a></li>
</ul>

</span>

<footer>
    <p><a href="https://social.lol/@robb">Follow me on Mastodon</a> or <a href="/subscribe">Subscribe with RSS</a></p>
</footer></div>

<div class="box webmentions">

<style>

    .webmentions h4 {
        margin: 10px 0;
    }

    .webmentions--likeboost {
        display: flex;
        flex-wrap: wrap;
    }

    .webmentions--likeboost a {
        margin-left: -10px;
    }

    .webmentions--likeboost img {
        width: 50px;
        height: 50px;
        border-radius: 50px;
        border: 3px solid white;
        transition: 0.2s linear;
    }

    .webmentions--likeboost img:hover,
    .webmentions--comment--header img:hover {
        border: 3px solid #E93BBF;
    }

    .webmentions--comment {
        display: flex;
        flex-direction: column;
    }

    .webmentions--comment--header {
        display: flex;
        justify-content: space-between;
    }

    .webmentions--comment--header img {
        border: 3px solid white;
        width: 50px;
        height: 50px;
        border-radius: 50px;
        transition: 0.2s linear;
    }

    .webmentions--comment--header--name {
        display: flex;
        align-items: center;
        font-weight: bold;
    }

    .webmentions--comment--header--name img {
        margin-right: 10px;
    }
</style>
    <h4>Likes</h4>
    <div class="webmentions--likeboost">
            <a target="_blank" rel="noopener" href="https://social.lol/@muhh"><img src="https://webmention.io/avatar/media.social.lol/a01a65adeda6d7812ad39f94b241697181436b63c4b33f0b32062c806b05d1a6.png" title="Markus :prami:"></a>
        
            <a target="_blank" rel="noopener" href="https://aus.social/@dcbuchan"><img src="https://webmention.io/avatar/media.social.lol/0cd14a411b6f87339b19d137ca85d9335b157a820853681e9f2b0be518f6ae5e.jpg" title="Quantum Gardener "></a>
        
            <a target="_blank" rel="noopener" href="https://social.lol/@geekyaubergine"><img src="https://webmention.io/avatar/media.social.lol/3273ffa1345bd38ab81be35e2ca1ae975a548f8098d5957602eb90ff02add122.png" title="Zoe Aubert   :prami:"></a>
        
            <a target="_blank" rel="noopener" href="https://front-end.social/@ashur"><img src="https://webmention.io/avatar/media.social.lol/47f9e3cea1d21932327b192e59a0faf2fb69a491bb0f1df89b0ed69800960171.jpg" title="Ashur Cabrera"></a>
        
            <a target="_blank" rel="noopener" href="https://indieweb.social/@Simonscarfe"><img src="https://webmention.io/avatar/media.social.lol/0c71db3ec49c8a83a721482f30f6d4fe33d7a382e8e707cfb019c860b023d1be.jpg" title="Simon Scarfe"></a>
        
            <a target="_blank" rel="noopener" href="https://mastodon.social/@tylersticka"><img src="https://webmention.io/avatar/media.social.lol/ecfc5765a49387efd278a21fc94a9266e787e0e8a755ea8f58ee9778d9361b3c.png" title="Tyler Sticka"></a>
        
            <a target="_blank" rel="noopener" href="https://hachyderm.io/@davidshq"><img src="https://webmention.io/avatar/media.social.lol/72e438d1f53a6ddda2424c074449ecade4f3ff4bcce9e022b9e6c0b967f94f4c.jpg" title="Dave Mackey"></a>
        
            <a target="_blank" rel="noopener" href="https://mastodon.social/@sidasa"><img src="https://webmention.io/avatar/media.social.lol/88242dc978bd2aef2553aa34dfaca5f9d75ec126539825828e9423e3214c93f3.jpg" title="sidasa@mastodon.social"></a>
        
            <a target="_blank" rel="noopener" href="https://social.sargasso.nl/@hanscees"><img src="https://webmention.io/avatar/media.social.lol/e9e6c475616ddf4e51d115f71c39eb8dde9124adac9b6b80c2a55773afddd5fe.jpg" title="hanscees"></a>
        
            <a target="_blank" rel="noopener" href="https://wombats.club/@nfg"><img src="https://webmention.io/avatar/media.social.lol/ffb3cadccabf6b0eb4fed1268d33d2f8c6dd96b8136133bb2f9347723d5cbd2f.png" title="nfg@wombats.club"></a>
        
            <a target="_blank" rel="noopener" href="https://utveckla.re/@simon"><img src="https://webmention.io/avatar/media.social.lol/87d953872faa6ca806e87cf36bf195f8fbff027a0a4fc151bc29c8ec23e47c16.jpg" title="Simon"></a>
        
            <a target="_blank" rel="noopener" href="https://mamot.fr/@talou"><img src="https://webmention.io/avatar/media.social.lol/98e8eddd184c0051f14452bbc292137408400dbf67c57c0682a7e95f8d37c832.png" title="talou "></a>
        
            <a target="_blank" rel="noopener" href="https://social.binarydad.com/@ryan"><img src="https://webmention.io/avatar/media.social.lol/caa325c725703e6f0c2f390d06a74e846fef0f2ab2399559353785de7a8a1101.png" title="Ryan Peters"></a>
        
            <a target="_blank" rel="noopener" href="https://furry.engineer/@ado"><img src="https://webmention.io/avatar/media.social.lol/6b86bead503c9ad7b270c3c32dce4d15c7e09a47e5848462ad689cb41be49b65.jpg" title="ado"></a>
        
            <a target="_blank" rel="noopener" href="https://imd.social/@claudius"><img src="https://webmention.io/avatar/media.social.lol/80b8aa52442df6f304f72fd278c0712c7419f1d3dac6ec161ddf0ba956d00b28.png" title="Claudius"></a>
        
            <a target="_blank" rel="noopener" href="https://norden.social/@leobm"><img src="https://webmention.io/avatar/media.social.lol/b186cb108feec3663ae1509cc1ade581dca3e2e5ed87a7b0adfa6b5612bc5273.png" title="Felix"></a>
        
            <a target="_blank" rel="noopener" href="https://masto.ai/@danjac"><img src="https://webmention.io/avatar/media.social.lol/0c2cba37b096d7046a5e964ccbcd8e392547a4200b79e6b0201acf725e8a22bf.jpg" title="Dan Jacob"></a>
        
            <a target="_blank" rel="noopener" href="https://nullpointer.social/@rafaelcaricio"><img src="https://webmention.io/avatar/media.social.lol/e1da96f1e6aa7cbd6a2c0737eef282958c216841829c4e76eae9e7e48094c76c.jpg" title="Rafael Caricio  @ #CCCamp23  ( 8808)"></a>
        
            <a target="_blank" rel="noopener" href="https://infosec.exchange/@nbwpuk"><img src="https://webmention.io/avatar/media.social.lol/056f122f1bef5c698ffd859b5ad171678175b3fbc846b63940069ca8e53ed8f6.jpg" title="Neil Batchelor"></a>
        
            <a target="_blank" rel="noopener" href="https://mastodon.social/@dansup"><img src="https://webmention.io/avatar/media.social.lol/2d312973c9399d7e7ca6324d4830f70ae4337fb9a62b4e4b8b8ae58370281b88.png" title="Daniel Supernault"></a>
        
            <a target="_blank" rel="noopener" href="https://phpc.social/@stefanzweifel"><img src="https://webmention.io/avatar/media.social.lol/31452d5082c01add27b8bf9872fe6bb39a5b25b14d7c044f43ca77ff2aeaea95.jpg" title="Stefan Zweifel"></a>
        
            <a target="_blank" rel="noopener" href="https://piaille.fr/@rfnix"><img src="https://webmention.io/avatar/media.social.lol/a1c27377642eca3e49eb57108235dfe7f8f6e28417b8612ec4f2ef093f541681.png" title="rfnix"></a>
        
            <a target="_blank" rel="noopener" href="https://social.cryptography.dog/@ansuz"><img src="https://webmention.io/avatar/media.social.lol/6f6dca86ecd6dfd51b9c97cba4753cb3915ba4beb434fdddff9ff6db597c208e.jpg" title="ansuz / "></a>
        
            <a target="_blank" rel="noopener" href="https://mastodon.social/@gwilymgj"><img src="https://webmention.io/avatar/media.social.lol/cd1128b0b656383b7be6d9b40e500038da97a399a423ea4b335fe7cabeb6230e.png" title="MoveFastAndFixThings"></a>
        
            <a target="_blank" rel="noopener" href="https://m.futex.au/@ijk64"><img src="https://webmention.io/avatar/media.social.lol/9de64e3da299112fa887bb3b3ef17bc21958b8fee7459e4649a8a447012e5581.png" title="ijk64"></a>
        
            <a target="_blank" rel="noopener" href="https://ibe.social/@bumble"><img src="https://webmention.io/avatar/media.social.lol/97d69913a624e87891246ea2accbf9286ebb2d0ed210c768e60c81525401046b.png" title="Bumble"></a>
        
            <a target="_blank" rel="noopener" href="https://dym.sh/@dym"><img src="https://webmention.io/avatar/media.social.lol/f4ce06921f8d09aef7da0d02fd83810c05d577b71b0b7dee555e690ee605525d.png" title="Dym Sohin"></a>
        
            <a target="_blank" rel="noopener" href="https://mstdn.social/@rpope"><img src="https://webmention.io/avatar/media.social.lol/4aa287efbec600365794fc0007c8208be3416a450ea8f20ca9961cfcbb446bbd.jpg" title="Radu Popescu"></a>
        
            <a target="_blank" rel="noopener" href="https://defcon.social/@mitexleo"><img src="https://webmention.io/avatar/media.social.lol/07d5193977efc1823a6a74f101532fcb145cb257f2412f9c33ce958e3722a642.png" title="Mitex Leo"></a>
        
            <a target="_blank" rel="noopener" href="https://pol.social/@matiz"><img src="https://webmention.io/avatar/media.social.lol/a3a78dd87d9a8c03fecfe5daab6054b1b6146b866ae406b0efbe2b343d04d20b.jpg" title="matiz@pol.social"></a>
        
            <a target="_blank" rel="noopener" href="https://mastodon.social/@Etheria"><img src="https://webmention.io/avatar/media.social.lol/e6dff1a5d80ac2d89d174184885e52ad0ad8c09412c67077e8486422e81e7705.jpg" title="Etheria"></a>
        
            <a target="_blank" rel="noopener" href="https://fish.balamb.fr/@murazaki"><img src="https://webmention.io/avatar/media.social.lol/cf062b19236dd4d9be691e264b9408b56420a191e9fe7027d1d81cb65e03fb1d.png" title="murazaki@fish.balamb.fr"></a>
        
            <a target="_blank" rel="noopener" href="https://social.tchncs.de/@marcr"><img src="https://webmention.io/avatar/media.social.lol/a9e89a69f03afb6d54cf7d6ac8b0bec135dde8605ebfc2b5778e03714918a01e.png" title="Marc Riese"></a>
        
            <a target="_blank" rel="noopener" href="https://gotosocial.verboseguacamole.com/@orbitalmartian"><img src="https://webmention.io/avatar/media.social.lol/fc6a3f973c53af5ba6373595a74b1c6feee4055f6920852bc3dd08db12c19a62.jpg" title="OrbitalMartian"></a>
        
            <a target="_blank" rel="noopener" href="https://infosec.exchange/@DefectiveWings"><img src="https://webmention.io/avatar/media.social.lol/2a2ae7f86358f25522101b33e8d757c6c4df99ec4a30ae457c46af5f6753879f.png" title="DefectiveWings "></a>
        
            <a target="_blank" rel="noopener" href="https://mas.to/@sahil"><img src="https://webmention.io/avatar/media.social.lol/e720b8f8aa2f96fe8f2f62d073b7f1cf03693f7c0e0449ce18cb8cffe3423ef4.jpg" title="Sahil "></a>
        
            <a target="_blank" rel="noopener" href="https://mastodon.social/@AgentofPhoenix"><img src="https://webmention.io/avatar/media.social.lol/212d488bee7e2a801c703cfa7d7e1d419e2b1e7edbac1c258ad7f7867cfc5619.png" title="AgentofPhoenix"></a>
        
            <a target="_blank" rel="noopener" href="https://mas.to/@_max"><img src="https://webmention.io/avatar/media.social.lol/2473d23e03bf4612eaddf2369a96c292d23b3c9572403066a4051915eae28dcd.png" title=" Max  :thinkhappy:"></a>
        
            <a target="_blank" rel="noopener" href="https://microhive.social/@oliver"><img src="https://webmention.io/avatar/media.social.lol/8205dd566b4efd1519b7edce867d9ab41399a6311d4b6d2f26e8822dbecf01c8.png" title="oliver"></a>
        
            <a target="_blank" rel="noopener" href="https://mastodon.social/@dmhama"><img src="https://webmention.io/avatar/media.social.lol/b65df415864313399a1757e241d9bc9de282ecb9913bc37d7b872756bd8e9be0.png" title="Hugo"></a>
        
    </div>



    <h4>Boosts</h4>
    <div class="webmentions--likeboost">
            <a target="_blank" rel="noopener" href="https://social.lewisdale.dev/@lewis"><img src="https://webmention.io/avatar/media.social.lol/4baa561e40725542dd900d6d003566085dca227fa7f2cdc7aae05f745a601c6e.png" title="lewis@social.lewisdale.dev"></a>
        
            <a target="_blank" rel="noopener" href="https://social.lol/@geekyaubergine"><img src="https://webmention.io/avatar/media.social.lol/3273ffa1345bd38ab81be35e2ca1ae975a548f8098d5957602eb90ff02add122.png" title="Zoe Aubert   :prami:"></a>
        
            <a target="_blank" rel="noopener" href="https://social.lol/@tldrqwerty"><img src="https://webmention.io/avatar/media.social.lol/e3f7ee4f86fb348d25516bdebe1ea7ccb9835b25ab2f06bc6922178187ca6def.jpg" title="tldrqwerty"></a>
        
            <a target="_blank" rel="noopener" href="https://social.lol/@robb"><img src="https://webmention.io/avatar/media.social.lol/d2b5943b2e687ef31399f8241bd07d88b1140716a89c5e026038eaf8ec5341b7.jpg" title="Robb Knight"></a>
        
            <a target="_blank" rel="noopener" href="https://mastodon.social/@closingtags"><img src="https://webmention.io/avatar/media.social.lol/e129a3a7fb9d18202c2e4ed4c4b386052c56674124dd32a74409d09601645e7a.jpg" title="Dylan"></a>
        
            <a target="_blank" rel="noopener" href="https://imd.social/@claudius"><img src="https://webmention.io/avatar/media.social.lol/80b8aa52442df6f304f72fd278c0712c7419f1d3dac6ec161ddf0ba956d00b28.png" title="Claudius"></a>
        
            <a target="_blank" rel="noopener" href="https://social.sargasso.nl/@hanscees"><img src="https://webmention.io/avatar/media.social.lol/e9e6c475616ddf4e51d115f71c39eb8dde9124adac9b6b80c2a55773afddd5fe.jpg" title="hanscees"></a>
        
            <a target="_blank" rel="noopener" href="https://norden.social/@leobm"><img src="https://webmention.io/avatar/media.social.lol/b186cb108feec3663ae1509cc1ade581dca3e2e5ed87a7b0adfa6b5612bc5273.png" title="Felix"></a>
        
            <a target="_blank" rel="noopener" href="https://masto.ai/@danjac"><img src="https://webmention.io/avatar/media.social.lol/0c2cba37b096d7046a5e964ccbcd8e392547a4200b79e6b0201acf725e8a22bf.jpg" title="Dan Jacob"></a>
        
            <a target="_blank" rel="noopener" href="https://mastodon.social/@dansup"><img src="https://webmention.io/avatar/media.social.lol/2d312973c9399d7e7ca6324d4830f70ae4337fb9a62b4e4b8b8ae58370281b88.png" title="Daniel Supernault"></a>
        
            <a target="_blank" rel="noopener" href="https://nullpointer.social/@rafaelcaricio"><img src="https://webmention.io/avatar/media.social.lol/e1da96f1e6aa7cbd6a2c0737eef282958c216841829c4e76eae9e7e48094c76c.jpg" title="Rafael Caricio  @ #CCCamp23  ( 8808)"></a>
        
            <a target="_blank" rel="noopener" href="https://piaille.fr/@rfnix"><img src="https://webmention.io/avatar/media.social.lol/a1c27377642eca3e49eb57108235dfe7f8f6e28417b8612ec4f2ef093f541681.png" title="rfnix"></a>
        
            <a target="_blank" rel="noopener" href="https://phpc.social/@stefanzweifel"><img src="https://webmention.io/avatar/media.social.lol/31452d5082c01add27b8bf9872fe6bb39a5b25b14d7c044f43ca77ff2aeaea95.jpg" title="Stefan Zweifel"></a>
        
            <a target="_blank" rel="noopener" href="https://m.futex.au/@ijk64"><img src="https://webmention.io/avatar/media.social.lol/9de64e3da299112fa887bb3b3ef17bc21958b8fee7459e4649a8a447012e5581.png" title="ijk64"></a>
        
            <a target="_blank" rel="noopener" href="https://indieweb.social/@janboddez"><img src="https://webmention.io/avatar/media.social.lol/a6f2023643cedeb0aa6195d6bcc57f3d4dc187529f64fab130f0f1311ddb6ef9.png" title="Jan Boddez"></a>
        
            <a target="_blank" rel="noopener" href="https://defcon.social/@mitexleo"><img src="https://webmention.io/avatar/media.social.lol/07d5193977efc1823a6a74f101532fcb145cb257f2412f9c33ce958e3722a642.png" title="Mitex Leo"></a>
        
            <a target="_blank" rel="noopener" href="https://mamot.fr/@bohwaz"><img src="https://webmention.io/avatar/media.social.lol/36a8db5d0627d0b2325c5440461cba11361461e931255b4ed8c449cafb5fe809.jpg" title="BohwaZ"></a>
        
            <a target="_blank" rel="noopener" href="https://social.tchncs.de/@marcr"><img src="https://webmention.io/avatar/media.social.lol/a9e89a69f03afb6d54cf7d6ac8b0bec135dde8605ebfc2b5778e03714918a01e.png" title="Marc Riese"></a>
        
            <a target="_blank" rel="noopener" href="https://floss.social/@projjalm"><img src="https://webmention.io/avatar/media.social.lol/161e263fad76e399da7d4cc0192edd5c0ca57ee5fd778eaea83ac67ce93053df.jpg" title="Projjal"></a>
        
            <a target="_blank" rel="noopener" href="https://mastodon.esmevane.com/@ironchamber"><img src="https://webmention.io/avatar/media.social.lol/0edcf08a793c19d444a581bf9f9ee9c9f2a55e257fb03b8d45c25a7a3c64511c.png" title="esmevane, sorry"></a>
        
            <a target="_blank" rel="noopener" href="https://infosec.exchange/@DefectiveWings"><img src="https://webmention.io/avatar/media.social.lol/2a2ae7f86358f25522101b33e8d757c6c4df99ec4a30ae457c46af5f6753879f.png" title="DefectiveWings "></a>
        
            <a target="_blank" rel="noopener" href="https://mas.to/@sahil"><img src="https://webmention.io/avatar/media.social.lol/e720b8f8aa2f96fe8f2f62d073b7f1cf03693f7c0e0449ce18cb8cffe3423ef4.jpg" title="Sahil "></a>
        
            <a target="_blank" rel="noopener" href="https://oisaur.com/@michelv"><img src="https://webmention.io/avatar/media.social.lol/18594c8f1a9ba74514bfa0e27ebd260c433fdf4cb5c0733beef71dbaa4ecac21.jpg" title="michel v"></a>
        
    </div>



    <h4>Comments</h4>
    <div class="webmentions--comments">
            <div class="webmentions--comment">
                <div class="webmentions--comment--header">
                    <div class="webmentions--comment--header--name">
                        <a target="_blank" rel="noopener" href="https://social.lol/@marie"><img src="https://webmention.io/avatar/media.social.lol/d697033108d0563a8fcc650842d9649e534f12e2968e1880e1e02b636e0874f0.png" title="Marie :kaifa:"></a> Marie :kaifa:
                    </div>
                    <div>
                        <a target="_blank" rel="noopener" href="https://social.lol/@marie/110621771650676130">2023-06-28</a>
                    </div>
                </div>
                <div class="webmentions--comment--content">
                    <p>Just as a note for people who require a Signature function for Node.js/Next.js that is easy to use I would recommend <a href="https://github.com/Lonor/site/blob/main/lib/signature.js"><span>https://</span><span>github.com/Lonor/site/blob/mai</span><span>n/lib/signature.js</span></a></p><p>First Argument is the url to the user's publickeyid/the url to the key, second is the endpoint which can be passed as an env of course and the third is the object/message you can see how it is being utilized with these two links.</p><p>Creates the Function to use it.<br /><a href="https://github.com/Lonor/site/blob/main/lib/util.js#L18"><span>https://</span><span>github.com/Lonor/site/blob/mai</span><span>n/lib/util.js#L18</span></a></p><p>Use the created Function.<br /><a href="https://github.com/Lonor/site/blob/main/pages/api/activitypub/inbox.js#L64"><span>https://</span><span>github.com/Lonor/site/blob/mai</span><span>n/pages/api/activitypub/inbox.js#L64</span></a></p>
<a href="https://github.com/Lonor/site/blob/main/lib/signature.js">site/lib/signature.js at main  Lonor/site</a>
                </div>
            </div>
        
            <div class="webmentions--comment">
                <div class="webmentions--comment--header">
                    <div class="webmentions--comment--header--name">
                        <a target="_blank" rel="noopener" href="https://mastodon.social/@dansup"><img src="https://webmention.io/avatar/media.social.lol/2d312973c9399d7e7ca6324d4830f70ae4337fb9a62b4e4b8b8ae58370281b88.png" title="Daniel Supernault"></a> Daniel Supernault
                    </div>
                    <div>
                        <a target="_blank" rel="noopener" href="https://mastodon.social/@dansup/110887155030884379">2023-08-14</a>
                    </div>
                </div>
                <div class="webmentions--comment--content">
                    <p><span><a href="https://social.lol/@robb">@<span>robb</span></a></span> <span><a href="https://bugle.lol/@wegotfamily">@<span>wegotfamily</span></a></span> Nice work, and great work on that blog post! </p><p>I noticed you use PHP, did you by chance use the Pixelfed source as a reference for the Http Sigs, or how did you figure that out? (Curious if there is a php based http sig post or explainer somewhere)</p>
<a href="https://bugle.lol/"></a>
                </div>
            </div>
        
            <div class="webmentions--comment">
                <div class="webmentions--comment--header">
                    <div class="webmentions--comment--header--name">
                        <a target="_blank" rel="noopener" href="https://social.lol/@robb"><img src="https://webmention.io/avatar/media.social.lol/d2b5943b2e687ef31399f8241bd07d88b1140716a89c5e026038eaf8ec5341b7.jpg" title="Robb Knight"></a> Robb Knight
                    </div>
                    <div>
                        <a target="_blank" rel="noopener" href="https://social.lol/@robb/110887162343346122">2023-08-14</a>
                    </div>
                </div>
                <div class="webmentions--comment--content">
                    <p><span><a href="https://mastodon.social/@dansup">@<span>dansup</span></a></span> The sigs was the biggest issue I had with it and yes I was in the PixelFed source at one point trying to work it out. I had 4 or 5 different implementations open because it definitely wasn't clear to me exactly how they're supposed to work.</p>
<a href="https://bugle.lol/"></a>
                </div>
            </div>
        
            <div class="webmentions--comment">
                <div class="webmentions--comment--header">
                    <div class="webmentions--comment--header--name">
                        <a target="_blank" rel="noopener" href="https://mastodon.social/@dansup"><img src="https://webmention.io/avatar/media.social.lol/2d312973c9399d7e7ca6324d4830f70ae4337fb9a62b4e4b8b8ae58370281b88.png" title="Daniel Supernault"></a> Daniel Supernault
                    </div>
                    <div>
                        <a target="_blank" rel="noopener" href="https://mastodon.social/@dansup/110887174952393803">2023-08-14</a>
                    </div>
                </div>
                <div class="webmentions--comment--content">
                    <p><span><a href="https://social.lol/@robb">@<span>robb</span></a></span> Yeah I figured, http sigs were challenging for me too, and back then there was only 1 implementation haha</p><p>I'm not sure if you've seen my <a href="https://mastodon.social/tags/PubKit">#<span>PubKit</span></a> posts, I'm working on a suite of tools to help make this easier.</p>
<a href="https://social.lol/tags/pubkit">pubkit</a>
<a href="https://bugle.lol/"></a>
                </div>
            </div>
        
            <div class="webmentions--comment">
                <div class="webmentions--comment--header">
                    <div class="webmentions--comment--header--name">
                        <a target="_blank" rel="noopener" href="https://mamot.fr/@talou"><img src="https://webmention.io/avatar/media.social.lol/98e8eddd184c0051f14452bbc292137408400dbf67c57c0682a7e95f8d37c832.png" title="talou "></a> talou 
                    </div>
                    <div>
                        <a target="_blank" rel="noopener" href="https://mamot.fr/@talou/110887203157466837">2023-08-14</a>
                    </div>
                </div>
                <div class="webmentions--comment--content">
                    <p><span><a href="https://social.lol/@robb">@<span>robb</span></a></span> <br />Oh I'm about to try something similar ! Thanks for your feedback :) <span><a href="https://mastodon.social/@dansup">@<span>dansup</span></a></span> <span><a href="https://bugle.lol/@wegotfamily">@<span>wegotfamily</span></a></span></p>
<a href="https://bugle.lol/"></a>
                </div>
            </div>
        
            <div class="webmentions--comment">
                <div class="webmentions--comment--header">
                    <div class="webmentions--comment--header--name">
                        <a target="_blank" rel="noopener" href="https://social.lol/@robb"><img src="https://webmention.io/avatar/media.social.lol/d2b5943b2e687ef31399f8241bd07d88b1140716a89c5e026038eaf8ec5341b7.jpg" title="Robb Knight"></a> Robb Knight
                    </div>
                    <div>
                        <a target="_blank" rel="noopener" href="https://social.lol/@robb/110887218017253999">2023-08-14</a>
                    </div>
                </div>
                <div class="webmentions--comment--content">
                    <p><span><a href="https://mastodon.social/@dansup">@<span>dansup</span></a></span> I did, Im looking forward to digging into it </p>
<a href="https://bugle.lol/"></a>
                </div>
            </div>
        
    </div>


</div>


		</div>

		<footer style="max-width: 800px;margin: 0 auto;">
            <div class="box">
                <p class="footer-links">
                    
                         <a href="/contact">Contact</a>
                    
                        &bull; <a href="/subscribe">Subscribe</a>
                    
                        &bull; <a href="/coffee">Buy me a Coffee</a>
                    
                        &bull; <a href="/search">Search</a>
                    
                        &bull; <a href="/log/versions">Version History</a>
                    
                        &bull; <a href="https://www.robbiepearce.com/softies">Icons by Robbie Pearce</a>
                    
                </p>
            </div>
            <div class="box copyright">
                &copy; 1988 - 2023 Robb Knight
            </div>
		</footer>

        </div>

    <svg width="0" height="0" style="display: none">
   <symbol role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="rss">
      <path fill="currentColor" d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415c1.814 0 3.293 1.479 3.293 3.295 0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526 0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91z"></path>
   </symbol>
   <symbol role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="buymeacoffee">
      <path fill="currentColor" d="M20.216 6.415l-.132-.666c-.119-.598-.388-1.163-1.001-1.379-.197-.069-.42-.098-.57-.241-.152-.143-.196-.366-.231-.572-.065-.378-.125-.756-.192-1.133-.057-.325-.102-.69-.25-.987-.195-.4-.597-.634-.996-.788a5.723 5.723 0 00-.626-.194c-1-.263-2.05-.36-3.077-.416a25.834 25.834 0 00-3.7.062c-.915.083-1.88.184-2.75.5-.318.116-.646.256-.888.501-.297.302-.393.77-.177 1.146.154.267.415.456.692.58.36.162.737.284 1.123.366 1.075.238 2.189.331 3.287.37 1.218.05 2.437.01 3.65-.118.299-.033.598-.073.896-.119.352-.054.578-.513.474-.834-.124-.383-.457-.531-.834-.473-.466.074-.96.108-1.382.146-1.177.08-2.358.082-3.536.006a22.228 22.228 0 01-1.157-.107c-.086-.01-.18-.025-.258-.036-.243-.036-.484-.08-.724-.13-.111-.027-.111-.185 0-.212h.005c.277-.06.557-.108.838-.147h.002c.131-.009.263-.032.394-.048a25.076 25.076 0 013.426-.12c.674.019 1.347.067 2.017.144l.228.031c.267.04.533.088.798.145.392.085.895.113 1.07.542.055.137.08.288.111.431l.319 1.484a.237.237 0 01-.199.284h-.003c-.037.006-.075.01-.112.015a36.704 36.704 0 01-4.743.295 37.059 37.059 0 01-4.699-.304c-.14-.017-.293-.042-.417-.06-.326-.048-.649-.108-.973-.161-.393-.065-.768-.032-1.123.161-.29.16-.527.404-.675.701-.154.316-.199.66-.267 1-.069.34-.176.707-.135 1.056.087.753.613 1.365 1.37 1.502a39.69 39.69 0 0011.343.376.483.483 0 01.535.53l-.071.697-1.018 9.907c-.041.41-.047.832-.125 1.237-.122.637-.553 1.028-1.182 1.171-.577.131-1.165.2-1.756.205-.656.004-1.31-.025-1.966-.022-.699.004-1.556-.06-2.095-.58-.475-.458-.54-1.174-.605-1.793l-.731-7.013-.322-3.094c-.037-.351-.286-.695-.678-.678-.336.015-.718.3-.678.679l.228 2.185.949 9.112c.147 1.344 1.174 2.068 2.446 2.272.742.12 1.503.144 2.257.156.966.016 1.942.053 2.892-.122 1.408-.258 2.465-1.198 2.616-2.657.34-3.332.683-6.663 1.024-9.995l.215-2.087a.484.484 0 01.39-.426c.402-.078.787-.212 1.074-.518.455-.488.546-1.124.385-1.766zm-1.478.772c-.145.137-.363.201-.578.233-2.416.359-4.866.54-7.308.46-1.748-.06-3.477-.254-5.207-.498-.17-.024-.353-.055-.47-.18-.22-.236-.111-.71-.054-.995.052-.26.152-.609.463-.646.484-.057 1.046.148 1.526.22.577.088 1.156.159 1.737.212 2.48.226 5.002.19 7.472-.14.45-.06.899-.13 1.345-.21.399-.072.84-.206 1.08.206.166.281.188.657.162.974a.544.544 0 01-.169.364zm-6.159 3.9c-.862.37-1.84.788-3.109.788a5.884 5.884 0 01-1.569-.217l.877 9.004c.065.78.717 1.38 1.5 1.38 0 0 1.243.065 1.658.065.447 0 1.786-.065 1.786-.065.783 0 1.434-.6 1.499-1.38l.94-9.95a3.996 3.996 0 00-1.322-.238c-.826 0-1.491.284-2.26.613z"></path>
   </symbol>
   <symbol role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="github">
      <path fill="currentColor" d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path>
   </symbol>
   <symbol role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="mastodon">
      <path fill="currentColor" d="M23.268 5.313c-.35-2.578-2.617-4.61-5.304-5.004C17.51.242 15.792 0 11.813 0h-.03c-3.98 0-4.835.242-5.288.309C3.882.692 1.496 2.518.917 5.127.64 6.412.61 7.837.661 9.143c.074 1.874.088 3.745.26 5.611.118 1.24.325 2.47.62 3.68.55 2.237 2.777 4.098 4.96 4.857 2.336.792 4.849.923 7.256.38.265-.061.527-.132.786-.213.585-.184 1.27-.39 1.774-.753a.057.057 0 0 0 .023-.043v-1.809a.052.052 0 0 0-.02-.041.053.053 0 0 0-.046-.01 20.282 20.282 0 0 1-4.709.545c-2.73 0-3.463-1.284-3.674-1.818a5.593 5.593 0 0 1-.319-1.433.053.053 0 0 1 .066-.054c1.517.363 3.072.546 4.632.546.376 0 .75 0 1.125-.01 1.57-.044 3.224-.124 4.768-.422.038-.008.077-.015.11-.024 2.435-.464 4.753-1.92 4.989-5.604.008-.145.03-1.52.03-1.67.002-.512.167-3.63-.024-5.545zm-3.748 9.195h-2.561V8.29c0-1.309-.55-1.976-1.67-1.976-1.23 0-1.846.79-1.846 2.35v3.403h-2.546V8.663c0-1.56-.617-2.35-1.848-2.35-1.112 0-1.668.668-1.67 1.977v6.218H4.822V8.102c0-1.31.337-2.35 1.011-3.12.696-.77 1.608-1.164 2.74-1.164 1.311 0 2.302.5 2.962 1.498l.638 1.06.638-1.06c.66-.999 1.65-1.498 2.96-1.498 1.13 0 2.043.395 2.74 1.164.675.77 1.012 1.81 1.012 3.12z"></path>
   </symbol>
   <symbol id="prami" viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
      <g transform="matrix(1.886789, 0, 0, -1.886789, -351.413971, 1414.84082)" style="">
         <g id="g24" transform="matrix(1, 0, 0, 1, 318.75, 511.366486)">
            <path d="m 0,0 c -20.346,0 -40.691,7.762 -56.215,23.285 l -53,53 c -31.047,31.047 -31.047,81.383 0,112.43 29.997,29.997 78,31.012 109.215,3.044 31.216,27.967 79.219,26.952 109.215,-3.044 31.047,-31.047 31.047,-81.383 0,-112.43 l -53,-53 C 40.692,7.762 20.346,0 0,0" style="fill:#ff69ad;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path26"/>
         </g>
         <g id="g28" transform="matrix(1, 0, 0, 1, 303.125, 656.25)">
            <path d="m 0,0 c 0,-3.452 -2.798,-6.25 -6.25,-6.25 -3.452,0 -6.25,2.798 -6.25,6.25 0,3.452 2.798,6.25 6.25,6.25 C -2.798,6.25 0,3.452 0,0" style="fill:#461036;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path30"/>
         </g>
         <g id="g32" transform="matrix(1, 0, 0, 1, 303.125, 656.25)">
            <path d="m 0,0 c 0,-3.452 -2.798,-6.25 -6.25,-6.25 -3.452,0 -6.25,2.798 -6.25,6.25 0,3.452 2.798,6.25 6.25,6.25 C -2.798,6.25 0,3.452 0,0 Z" style="fill:none;stroke:#461036;stroke-width:6;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1" id="path34"/>
         </g>
         <g id="g36" transform="matrix(1, 0, 0, 1, 346.875, 656.25)">
            <path d="m 0,0 c 0,-3.452 -2.798,-6.25 -6.25,-6.25 -3.452,0 -6.25,2.798 -6.25,6.25 0,3.452 2.798,6.25 6.25,6.25 C -2.798,6.25 0,3.452 0,0" style="fill:#461036;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path38"/>
         </g>
         <g id="g40" transform="matrix(1, 0, 0, 1, 346.875, 656.25)">
            <path d="m 0,0 c 0,-3.452 -2.798,-6.25 -6.25,-6.25 -3.452,0 -6.25,2.798 -6.25,6.25 0,3.452 2.798,6.25 6.25,6.25 C -2.798,6.25 0,3.452 0,0 Z" style="fill:none;stroke:#461036;stroke-width:6;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1" id="path42"/>
         </g>
         <g id="g44" transform="matrix(1, 0, 0, 1, 296.88681, 631.243286)">
            <path d="M 0,0 C 10.004,-16.325 33.722,-16.325 43.726,0" style="fill:none;stroke:#461036;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1" id="path46"/>
         </g>
         <g id="g48" transform="matrix(1, 0, 0, 1, 418.75, 637.5)">
            <path d="M 0,0 C 0,17.259 -13.991,31.25 -31.25,31.25 -48.509,31.25 -62.5,17.259 -62.5,0 c 0,-17.259 13.991,-31.25 31.25,-31.25 C -13.991,-31.25 0,-17.259 0,0" style="fill:#e34198;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path50"/>
         </g>
         <g id="g52" transform="matrix(1, 0, 0, 1, 281.25, 637.5)">
            <path d="M 0,0 C 0,17.259 -13.991,31.25 -31.25,31.25 -48.509,31.25 -62.5,17.259 -62.5,0 c 0,-17.259 13.991,-31.25 31.25,-31.25 C -13.991,-31.25 0,-17.259 0,0" style="fill:#e34198;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path54"/>
         </g>
         <g id="g56" transform="matrix(1, 0, 0, 1, 296.88681, 631.243286)">
            <path d="M 0,0 C 10.004,-16.325 33.722,-16.325 43.726,0" style="fill:none;stroke:#461036;stroke-width:10;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1" id="path58"/>
         </g>
      </g>
   </symbol>
   <symbol xmlnsDc="http://purl.org/dc/elements/1.1/" xmlnsCc="http://web.resource.org/cc/" xmlnsRdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlnsSvg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlnsSodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlnsInkscape="http://www.inkscape.org/namespaces/inkscape" version="1.0" id="psn" overflow="visible" enable-background="new 0 0 612.092 560.54" xml:space="preserve" sodipodiVersion="0.32" inkscapeVersion="0.44.1" sodipodiDocname="Playstation logo colour.svg" sodipodiDocbase="C:\Documents and Settings\Sigurd\Mine dokumenter\Mine bilder" viewBox="0 0 612.092 560.54">
      <metadata id="metadata20">
         <rdf:RDF>
            <cc:Work rdfAbout="">
               <dc:format>image/svg+xml</dc:format>
               <dc:type rdfResource="http://purl.org/dc/dcmitype/StillImage"></dc:type>
            </cc:Work>
         </rdf:RDF>
      </metadata>
      <defs id="defs18"></defs>
      <sodipodi:namedview inkscapeWindowHeight="719" inkscapeWindowWidth="1024" inkscapePageshadow="2" inkscapePageopacity="0.0" guidetolerance="10.0" gridtolerance="10.0" objecttolerance="10.0" borderopacity="1.0" bordercolor="#666666" pagecolor="#ffffff" id="base" inkscapeZoom="1.9023033" inkscapeCx="145.65542" inkscapeCy="98.001689" inkscapeWindowX="-4" inkscapeWindowY="-4" inkscapeCurrentLayer="g3"></sodipodi:namedview>
      <g id="g3" transform="translate(-61.68556,-312.8684)">
         <path fill="#de0029" clip-rule="evenodd" d="M 395.06807,434.21345 L 394.60021,863.39514 L 279.61012,825.99696 L 279.61012,321.53515 L 426.38841,360.34125 C 520.34231,385.59251 577.83949,434.67697 576.90381,520.70189 C 575.96956,620.75529 529.69221,660.95773 439.47538,634.77658 L 439.47538,437.47977 C 439.47538,413.635 395.06807,412.23866 395.06807,434.21345 L 395.06807,434.21345 z " id="path7"></path>
         <path fill="#f3c202" clip-rule="evenodd" d="M 226.78568,742.76757 L 172.56056,761.00535 C 137.49733,773.16387 107.58489,744.64627 139.83807,732.95128 L 166.01346,723.60717 L 67.381005,692.27665 C 36.994899,702.56663 8.4787729,724.53999 10.3531,755.3983 C 12.223081,786.7187 83.74009,794.20296 138.90381,803.08643 C 190.32031,811.49773 237.06553,806.82349 279.60869,791.86223 L 279.60869,759.60031 L 226.78568,742.76757 L 226.78568,742.76757 z M 395.53446,863.39514 L 496.03688,828.32754 L 394.60021,796.07291 L 394.60021,861.05298 L 395.53446,863.39514 L 395.53446,863.39514 z " id="path9"></path>
         <path fill="#326db3" clip-rule="evenodd" d="M 662.91715,769.42531 L 664.78565,768.95457 C 708.72663,753.53123 727.42501,732.01703 722.75363,711.92089 C 715.27373,678.26121 661.51646,660.02348 578.77524,653.9442 C 519.41092,649.73926 460.98092,662.82627 403.95154,682.46035 L 394.60164,685.73681 L 496.97405,717.52794 L 556.80624,697.42166 C 619.44554,685.73681 644.69244,706.30513 584.38808,725.47573 L 554.46981,735.75553 L 662.91715,769.42531 L 662.91715,769.42531 z M 279.61012,620.75529 L 234.26272,636.17869 L 279.61012,650.2057 L 279.61012,620.75529 L 279.61012,620.75529 z " id="path11"></path>
         <path fill="00aa9e" clip-rule="evenodd" d="M 496.03688,828.32754 L 662.91715,769.42531 L 554.46695,735.75553 L 394.60021,790.45575 L 394.60021,796.07291 L 496.03688,828.32754 L 496.03688,828.32754 z M 279.61012,725.00349 L 226.78712,742.76906 L 279.61012,759.60031 L 279.61012,725.00349 L 279.61012,725.00349 z M 394.60021,752.5955 L 394.60021,685.73681 L 496.97262,717.52794 L 394.60021,752.5955 L 394.60021,752.5955 z M 166.01492,723.60717 L 279.60869,682.93251 L 279.60869,650.2057 L 234.26272,636.17869 L 69.718853,691.81461 C 69.250983,691.81461 68.316721,692.27665 67.38246,692.27665 L 166.01492,723.60717 L 166.01492,723.60717 z " id="path13"></path>
      </g>
   </symbol>
   <symbol role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="lastfm">
      <path fill="currentColor" d="M10.584 17.21l-.88-2.392s-1.43 1.594-3.573 1.594c-1.897 0-3.244-1.649-3.244-4.288 0-3.382 1.704-4.591 3.381-4.591 2.42 0 3.189 1.567 3.849 3.574l.88 2.749c.88 2.666 2.529 4.81 7.285 4.81 3.409 0 5.718-1.044 5.718-3.793 0-2.227-1.265-3.381-3.63-3.931l-1.758-.385c-1.21-.275-1.567-.77-1.567-1.595 0-.934.742-1.484 1.952-1.484 1.32 0 2.034.495 2.144 1.677l2.749-.33c-.22-2.474-1.924-3.492-4.729-3.492-2.474 0-4.893.935-4.893 3.932 0 1.87.907 3.051 3.189 3.601l1.87.44c1.402.33 1.869.907 1.869 1.704 0 1.017-.99 1.43-2.86 1.43-2.776 0-3.93-1.457-4.59-3.464l-.907-2.75c-1.155-3.573-2.997-4.893-6.653-4.893C2.144 5.333 0 7.89 0 12.233c0 4.18 2.144 6.434 5.993 6.434 3.106 0 4.591-1.457 4.591-1.457z"></path>
   </symbol>
   <symbol role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="applemusic">
      <path fill="currentColor" d="M23.994 6.124a9.23 9.23 0 00-.24-2.19c-.317-1.31-1.062-2.31-2.18-3.043a5.022 5.022 0 00-1.877-.726 10.496 10.496 0 00-1.564-.15c-.04-.003-.083-.01-.124-.013H5.986c-.152.01-.303.017-.455.026-.747.043-1.49.123-2.193.4-1.336.53-2.3 1.452-2.865 2.78-.192.448-.292.925-.363 1.408-.056.392-.088.785-.1 1.18 0 .032-.007.062-.01.093v12.223c.01.14.017.283.027.424.05.815.154 1.624.497 2.373.65 1.42 1.738 2.353 3.234 2.801.42.127.856.187 1.293.228.555.053 1.11.06 1.667.06h11.03a12.5 12.5 0 001.57-.1c.822-.106 1.596-.35 2.295-.81a5.046 5.046 0 001.88-2.207c.186-.42.293-.87.37-1.324.113-.675.138-1.358.137-2.04-.002-3.8 0-7.595-.003-11.393zm-6.423 3.99v5.712c0 .417-.058.827-.244 1.206-.29.59-.76.962-1.388 1.14-.35.1-.706.157-1.07.173-.95.045-1.773-.6-1.943-1.536a1.88 1.88 0 011.038-2.022c.323-.16.67-.25 1.018-.324.378-.082.758-.153 1.134-.24.274-.063.457-.23.51-.516a.904.904 0 00.02-.193c0-1.815 0-3.63-.002-5.443a.725.725 0 00-.026-.185c-.04-.15-.15-.243-.304-.234-.16.01-.318.035-.475.066-.76.15-1.52.303-2.28.456l-2.325.47-1.374.278c-.016.003-.032.01-.048.013-.277.077-.377.203-.39.49-.002.042 0 .086 0 .13-.002 2.602 0 5.204-.003 7.805 0 .42-.047.836-.215 1.227-.278.64-.77 1.04-1.434 1.233-.35.1-.71.16-1.075.172-.96.036-1.755-.6-1.92-1.544-.14-.812.23-1.685 1.154-2.075.357-.15.73-.232 1.108-.31.287-.06.575-.116.86-.177.383-.083.583-.323.6-.714v-.15c0-2.96 0-5.922.002-8.882 0-.123.013-.25.042-.37.07-.285.273-.448.546-.518.255-.066.515-.112.774-.165.733-.15 1.466-.296 2.2-.444l2.27-.46c.67-.134 1.34-.27 2.01-.403.22-.043.442-.088.663-.106.31-.025.523.17.554.482.008.073.012.148.012.223.002 1.91.002 3.822 0 5.732z"></path>
   </symbol>
   <symbol role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="letterboxd">
      <path fill="currentColor" d="M8.29 16.752V7.2H6.546V4.8h6.328v2.4h-1.746v9.574h3.925v-2.618h2.839V19.2H6.545v-2.448h1.746zM0 12c0 6.628 5.372 12 12 12s12-5.372 12-12S18.628 0 12 0 0 5.372 0 12z"></path>
   </symbol>
   <symbol viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg" id="oku">
      <path d="M500 183.794v64.23c-57.312 0-112.648 22.727-153.162 62.253-32.609 32.608-54.348 73.122-61.265 117.589H500v65.217H0v-65.217h215.415c-6.917-44.467-28.656-85.969-61.265-118.577C113.636 269.763 58.3 247.036 0 247.036v-65.218c51.383 0 102.767 13.834 146.245 40.514 44.466 25.692 80.04 63.241 104.743 108.696 23.716-44.467 59.289-82.016 103.755-107.708 43.478-26.68 93.874-39.526 145.257-39.526ZM169.96 85.968c0-43.478 35.574-79.051 80.04-79.051 44.466 0 80.04 35.573 80.04 79.051 0 43.479-35.574 78.064-80.04 78.064-44.466 0-80.04-34.585-80.04-78.064Zm0 0"></path>
   </symbol>
   <symbol version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" id="ticket">
      <desc>Created with Sketch.</desc>
      <defs></defs>
      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
         <g id="Artboard-4" transform="translate(-708.000000, -511.000000)">
            <g id="196" transform="translate(708.000000, 511.000000)">
               <path d="M14.2675644,19 L2.991155,19 C1.89147046,19 1,18.1029399 1,16.9941413 L1,13.7324356 C1.59780137,13.3866262 2,12.7402824 2,12 C2,11.2597176 1.59780137,10.6133738 1,10.2675644 L1,7.00585866 C1,5.89805351 1.88967395,5 2.991155,5 L14.2675644,5 C14.6133738,5.59780137 15.2597176,6 16,6 C16.7402824,6 17.3866262,5.59780137 17.7324356,5 L21.008845,5 C22.1085295,5 23,5.89706013 23,7.00585866 L23,10.2675644 C22.4021986,10.6133738 22,11.2597176 22,12 C22,12.7402824 22.4021986,13.3866262 23,13.7324356 L23,16.9941413 C23,18.1019465 22.1103261,19 21.008845,19 L17.7324356,19 C17.3866262,18.4021986 16.7402824,18 16,18 C15.2597176,18 14.6133738,18.4021986 14.2675644,19 Z" id="Combined-Shape" stroke="currentColor" stroke-width="2" stroke-linejoin="round"></path>
               <rect id="Rectangle" fill="currentColor" x="15" y="6" width="2" height="3" rx="1"></rect>
               <rect id="Rectangle" fill="currentColor" x="15" y="10" width="2" height="4" rx="1"></rect>
               <rect id="Rectangle" fill="currentColor" x="15" y="15" width="2" height="3" rx="1"></rect>
               <rect id="Rectangle-133" fill="currentColor" opacity="0.5" x="4" y="8" width="8" height="2" rx="1"></rect>
               <rect id="Rectangle-133" fill="currentColor" opacity="0.5" x="4" y="11" width="4" height="2" rx="1"></rect>
               <rect id="Rectangle-133" fill="currentColor" opacity="0.200000003" x="4" y="15" width="9" height="1" rx="0.5"></rect>
            </g>
         </g>
      </g>
   </symbol>
   <symbol version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" id="polaroids">
      <desc>Created with Sketch.</desc>
      <defs></defs>
      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
         <g id="Artboard-4" transform="translate(-884.000000, -379.000000)">
            <g id="140" transform="translate(884.000000, 379.000000)">
               <g id="2" transform="translate(0.068124, 1.974212)" fill="currentColor">
                  <path d="M3.93187648,2.60283088 L2.09644494,3.09350651 L3.93187648,9.94343026 L3.93187648,17.4076278 L0.230395558,3.59351294 C-0.0541723055,2.53149121 0.577347276,1.43952472 1.64224814,1.15418539 L3.93187648,0.540681329 L3.93187648,2.60283088 Z" id="Combined-Shape"></path>
               </g>
               <g id="1" transform="translate(6.000000, 2.000000)">
                  <path d="M0,1.99079514 C0,0.891309342 0.892622799,0 1.99508929,0 L16.0049107,0 C17.1067681,0 18,0.898212381 18,1.99079514 L18,18.0092049 C18,19.1086907 17.1073772,20 16.0049107,20 L1.99508929,20 C0.893231902,20 0,19.1017876 0,18.0092049 L0,1.99079514 Z M2,2 L2,16 L16,16 L16,2 L2,2 Z" id="Combined-Shape" fill="currentColor"></path>
                  <circle id="Oval-39" fill="currentColor" cx="6" cy="6" r="2"></circle>
                  <path d="M15,8 C14,8 12.5,8.5 11,10 C9.5,11.5 9,14 9,15" id="Path-54" stroke="currentColor" stroke-width="2" stroke-linejoin="round"></path>
                  <path d="M4,15 C4,14 4.5,12 7,11 C9.5,10 11,10.5 11,10.5" id="Path-55" stroke="currentColor" stroke-width="2" stroke-linejoin="round"></path>
               </g>
            </g>
         </g>
      </g>
   </symbol>
   <symbol version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" id="pen">
      <desc>Created with Sketch.</desc>
      <defs></defs>
      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
         <g id="Artboard-4" transform="translate(-532.000000, -687.000000)" stroke="currentColor" stroke-width="2">
            <g id="272" transform="translate(531.000000, 687.000000)">
               <g id="pen-tool" transform="translate(12.474344, 12.574381) rotate(-315.000000) translate(-12.474344, -12.574381) translate(5.474344, 2.074381)">
                  <path d="M7,22.5 C7,22.5 12,11 13,10 C12,9 10,3 10,3 L4,3 C4,3 2,9 1,10 C2,11 7,22.5 7,22.5 Z" id="Path-208" stroke-linecap="round" stroke-linejoin="round"></path>
                  <rect id="Rectangle-194" stroke-linecap="round" stroke-linejoin="round" x="3" y="0" width="8" height="3"></rect>
                  <path d="M7,21 L7,10" id="Path-209"></path>
                  <circle id="Oval-150" cx="7" cy="10" r="1"></circle>
               </g>
            </g>
         </g>
      </g>
   </symbol>
   <symbol version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" id="chat">
      <defs></defs>
      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
         <g id="Artboard-4" transform="translate(-664.000000, -115.000000)">
            <g id="15" transform="translate(664.000000, 115.000000)">
               <path d="M5.58578644,18 L8.29289322,20.7071068 L9,21.4142136 L9.70710678,20.7071068 L12.4142136,18 L20.0024554,18 C21.1070219,18 22,17.1024207 22,15.9975267 L22,6.00247329 C22,4.90415942 21.1082892,4 20.0066023,4 L3.99339768,4 C2.89058031,4 2,4.89859975 2,6.00247329 L2,15.9975267 C2,17.0970743 2.89547708,18 3.99895656,18 L5.58578644,18 Z" id="Rectangle-406" stroke="currentColor" stroke-width="2" stroke-linejoin="round"></path>
               <rect id="Rectangle-407" fill="currentColor" x="6" y="8" width="12" height="2" rx="1"></rect>
               <rect id="Rectangle-407" fill="currentColor" x="6" y="12" width="12" height="2" rx="1"></rect>
            </g>
         </g>
      </g>
   </symbol>
   <symbol version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" id="terminal">
      <desc>Created with Sketch.</desc>
      <defs></defs>
      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
         <g id="Artboard-4" transform="translate(-752.000000, -379.000000)">
            <g id="136" transform="translate(752.000000, 379.000000)">
               <rect id="Rectangle-87" stroke="currentColor" stroke-width="2" x="2" y="4" width="20" height="16" rx="2"></rect>
               <polyline id="Path-63" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" points="6 8 8 10 6 12"></polyline>
               <rect id="Rectangle-88" fill="currentColor" x="10" y="11" width="6" height="2" rx="1"></rect>
            </g>
         </g>
      </g>
   </symbol>
   <symbol version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" id="ipod">
      <desc>Created with Sketch.</desc>
      <defs></defs>
      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
         <g id="Artboard-4" transform="translate(-136.000000, -291.000000)" stroke="#333333">
            <g id="83" transform="translate(136.000000, 291.000000)">
               <rect id="Rectangle-410" stroke-width="2" stroke-linejoin="round" x="5" y="2" width="14" height="20" rx="1"></rect>
               <rect id="Rectangle-412" opacity="0.5" x="7.5" y="4.5" width="9" height="6" rx="1"></rect>
               <circle id="Oval-31" stroke-width="2" cx="12" cy="16" r="3"></circle>
            </g>
         </g>
      </g>
   </symbol>
   <symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" id="maccy">
      <defs/>
      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
         <g id="Artboard-4" transform="translate(-576.000000, -291.000000)">
            <g id="93" transform="translate(576.000000, 291.000000)">
               <rect id="Rectangle-29" stroke="#333333" stroke-width="2" x="4" y="1" width="16" height="19" rx="1"/>
               <path d="M5,20 L19,20 L19,22.0010434 C19,22.5527519 18.5500512,23 17.9931545,23 L6.00684547,23 C5.45078007,23 5,22.5573397 5,22.0010434 L5,20 Z" id="Rectangle-30" stroke="#333333" stroke-width="2"/>
               <path d="M7,3.5 L6.5,3.5 L6.5,4 L6.5,12 L6.5,12.5 L7,12.5 L12,12.5 L17,12.5 L17.5,12.5 L17.5,12 L17.5,4 L17.5,3.5 L17,3.5 L7,3.5 Z" id="Rectangle-31" stroke="#333333" stroke-linejoin="round"/>
               <rect id="Combined-Shape" fill="#333333" x="13" y="15" width="4" height="1"/>
               <rect id="Rectangle-34" fill="#333333" x="6" y="16" width="2" height="1"/>
               <path d="M9,5 L10,5 L10,7 L9,7 L9,5 Z M11,8 L12,8 L12,9 L11,9 L11,8 Z M12,5 L13,5 L13,9 L12,9 L12,5 Z M9,9 L10,9 L10,10 L9,10 L9,9 Z M10,10 L14,10 L14,11 L10,11 L10,10 Z M14,9 L15,9 L15,10 L14,10 L14,9 Z M14,5 L15,5 L15,7 L14,7 L14,5 Z" id="Combined-Shape" fill="#333333" opacity="0.5"/>
            </g>
         </g>
      </g>
   </symbol>
   <symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" id="iphone">
      <defs/>
      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
         <g id="Artboard-4" transform="translate(-796.000000, -115.000000)">
            <g id="18" transform="translate(796.000000, 115.000000)">
               <rect id="Rectangle-410" stroke="#333333" stroke-width="2" stroke-linejoin="round" x="6" y="2" width="12" height="20" rx="1"/>
               <rect id="Rectangle-412" fill="#333333" x="10" y="4" width="4" height="1" rx="0.5"/>
               <circle id="Oval-31" fill="#333333" cx="12" cy="19" r="1"/>
            </g>
         </g>
      </g>
   </symbol>
   <symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" id="macmini">
      <defs/>
      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linejoin="round">
         <g id="Artboard-4" transform="translate(-532.000000, -115.000000)" stroke-width="2" stroke="#333333">
            <g id="12" transform="translate(532.000000, 115.000000)">
               <polygon id="Triangle-1" points="5 21 5 3 21 12"/>
            </g>
         </g>
      </g>
   </symbol>
   <symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" id="home">
      <defs/>
      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round">
         <g id="Artboard-4" transform="translate(-620.000000, -159.000000)" stroke="#333333" stroke-width="2">
            <g id="34" transform="translate(620.000000, 159.000000)">
               <path d="M1,11 L12,2 C12,2 22.9999989,11.0000005 23,11" id="Path-50"/>
               <path d="M3,10 C3,10 3,10.4453982 3,10.9968336 L3,20.0170446 C3,20.5675806 3.43788135,21.0138782 4.00292933,21.0138781 L8.99707067,21.0138779 C9.55097324,21.0138779 10,20.5751284 10,20.0089602 L10,15.0049177 C10,14.449917 10.4433532,14 11.0093689,14 L12.9906311,14 C13.5480902,14 14,14.4387495 14,15.0049177 L14,20.0089602 C14,20.5639609 14.4378817,21.0138779 15.0029302,21.0138779 L19.9970758,21.0138781 C20.5509789,21.0138782 21.000006,20.56848 21.000006,20.0170446 L21.0000057,10" id="Path-51"/>
            </g>
         </g>
      </g>
   </symbol>
   <symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" id="heart">
      <defs/>
      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linejoin="round">
         <g id="Artboard-4" transform="translate(-48.000000, -115.000000)" stroke="#333333" stroke-width="2" fill-rule="nonzero">
            <g id="1" transform="translate(48.000000, 115.000000)">
               <path d="M12.0174466,21 L20.9041801,11.3556763 C22.6291961,9.13778099 22.2795957,5.90145416 20.1233257,4.12713796 C17.9670557,2.35282175 14.8206518,2.71241362 13.0956358,4.93030888 L12.0174465,6.5 L10.9043642,4.93030888 C9.17934824,2.71241362 6.0329443,2.35282175 3.87667432,4.12713796 C1.72040435,5.90145416 1.37080391,9.13778099 3.09581989,11.3556763 L12.0174466,21 Z" id="Path-2"/>
            </g>
         </g>
      </g>
   </symbol>
   <symbol role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="lemmy">
      <path fill="currentColor" d="M2.9595 4.2228a3.9132 3.9132 0 0 0-.332.019c-.8781.1012-1.67.5699-2.155 1.3862-.475.8-.5922 1.6809-.35 2.4971.2421.8162.8297 1.5575 1.6982 2.1449.0053.0035.0106.0076.0163.0114.746.4498 1.492.7431 2.2877.8994-.02.3318-.0272.6689-.006 1.0181.0634 1.0432.4368 2.0006.996 2.8492l-2.0061.8189a.4163.4163 0 0 0-.2276.2239.416.416 0 0 0 .0879.455.415.415 0 0 0 .2941.1231.4156.4156 0 0 0 .1595-.0312l2.2093-.9035c.408.4859.8695.9315 1.3723 1.318.0196.0151.0407.0264.0603.0423l-1.2918 1.7103a.416.416 0 0 0 .664.501l1.314-1.7385c.7185.4548 1.4782.7927 2.2294 1.0242.3833.7209 1.1379 1.1871 2.0202 1.1871.8907 0 1.6442-.501 2.0242-1.2072.744-.2347 1.4959-.5729 2.2073-1.0262l1.332 1.7606a.4157.4157 0 0 0 .7439-.1936.4165.4165 0 0 0-.0799-.3074l-1.3099-1.7345c.0083-.0075.0178-.0113.0261-.0188.4968-.3803.9549-.8175 1.3622-1.2939l2.155.8794a.4156.4156 0 0 0 .5412-.2276.4151.4151 0 0 0-.2273-.5432l-1.9438-.7928c.577-.8538.9697-1.8183 1.0504-2.8693.0268-.3507.0242-.6914.0079-1.0262.7905-.1572 1.5321-.4502 2.2737-.8974.0053-.0033.011-.0076.0163-.0113.8684-.5874 1.456-1.3287 1.6982-2.145.2421-.8161.125-1.697-.3501-2.497-.4849-.8163-1.2768-1.2852-2.155-1.3863a3.2175 3.2175 0 0 0-.332-.0189c-.7852-.0151-1.6231.229-2.4286.6942-.5926.342-1.1252.867-1.5433 1.4387-1.1699-.6703-2.6923-1.0476-4.5635-1.0785a15.5768 15.5768 0 0 0-.5111 0c-2.085.034-3.7537.43-5.0142 1.1449-.0033-.0038-.0045-.0114-.008-.0152-.4233-.5916-.973-1.1365-1.5835-1.489-.8055-.465-1.6434-.7083-2.4286-.6941Zm.2858.7365c.5568.042 1.1696.2358 1.7787.5875.485.28.9757.7554 1.346 1.2696a5.6875 5.6875 0 0 0-.4969.4085c-.9201.8516-1.4615 1.9597-1.668 3.2335-.6809-.1402-1.3183-.3945-1.984-.7948-.7553-.5128-1.2159-1.1225-1.4004-1.7445-.1851-.624-.1074-1.2712.2776-1.9196.3743-.63.9275-.9534 1.6118-1.0322a2.796 2.796 0 0 1 .5352-.0076Zm17.5094 0a2.797 2.797 0 0 1 .5353.0075c.6842.0786 1.2374.4021 1.6117 1.0322.385.6484.4627 1.2957.2776 1.9196-.1845.622-.645 1.2317-1.4004 1.7445-.6578.3955-1.2881.6472-1.9598.7888-.1942-1.2968-.7375-2.4338-1.666-3.302a5.5639 5.5639 0 0 0-.4709-.3923c.3645-.49.8287-.9428 1.2938-1.2113.6091-.3515 1.2219-.5454 1.7787-.5875ZM12.006 6.0036a14.832 14.832 0 0 1 .487 0c2.3901.0393 4.0848.67 5.1631 1.678 1.1501 1.0754 1.6423 2.6006 1.499 4.467-.1311 1.7079-1.2203 3.2281-2.652 4.324-.694.5313-1.4626.9354-2.2254 1.2294.0031-.0453.014-.0888.014-.1349.0029-1.1964-.9313-2.2133-2.2918-2.2133-1.3606 0-2.3222 1.0154-2.2918 2.2213.0013.0507.014.0972.0181.1471-.781-.2933-1.5696-.7013-2.2777-1.2456-1.4239-1.0945-2.4997-2.6129-2.6037-4.322-.1129-1.8567.3778-3.3382 1.5212-4.3965C7.5094 6.7 9.352 6.047 12.006 6.0036Zm-3.6419 6.8291c-.6053 0-1.0966.4903-1.0966 1.0966 0 .6063.4913 1.0986 1.0966 1.0986s1.0966-.4923 1.0966-1.0986c0-.6063-.4913-1.0966-1.0966-1.0966zm7.2819.0113c-.5998 0-1.0866.4859-1.0866 1.0866s.4868 1.0885 1.0866 1.0885c.5997 0 1.0865-.4878 1.0865-1.0885s-.4868-1.0866-1.0865-1.0866zM12 16.0835c1.0237 0 1.5654.638 1.5634 1.4829-.0018.7849-.6723 1.485-1.5634 1.485-.9167 0-1.54-.5629-1.5634-1.493-.0212-.8347.5397-1.4749 1.5634-1.4749Z"></path>
   </symbol>
</svg>

	</body>
</html>
